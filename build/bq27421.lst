ARM GAS  C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"bq27421.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.bq27421_i2c_command_write,"ax",%progbits
  18              		.align	1
  19              		.global	bq27421_i2c_command_write
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv4-sp-d16
  25              	bq27421_i2c_command_write:
  26              	.LFB124:
  27              		.file 1 "Lib/bq27421/bq27421.c"
   1:Lib/bq27421/bq27421.c **** #include "bq27421.h"
   2:Lib/bq27421/bq27421.c **** #include "i2c.h"
   3:Lib/bq27421/bq27421.c **** 
   4:Lib/bq27421/bq27421.c **** bool bq27421_i2c_command_write( uint8_t command, uint16_t data )
   5:Lib/bq27421/bq27421.c **** {
  28              		.loc 1 5 0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 8
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              	.LVL0:
  33 0000 00B5     		push	{lr}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 4
  36              		.cfi_offset 14, -4
  37 0002 85B0     		sub	sp, sp, #20
  38              	.LCFI1:
  39              		.cfi_def_cfa_offset 24
   6:Lib/bq27421/bq27421.c ****     HAL_StatusTypeDef ret;
   7:Lib/bq27421/bq27421.c ****     uint8_t i2c_data[3];
   8:Lib/bq27421/bq27421.c **** 
   9:Lib/bq27421/bq27421.c ****     i2c_data[0] = command;
  40              		.loc 1 9 0
  41 0004 8DF80C00 		strb	r0, [sp, #12]
  10:Lib/bq27421/bq27421.c ****     i2c_data[1] = ( uint8_t )( data & 0x00FF );
  42              		.loc 1 10 0
  43 0008 8DF80D10 		strb	r1, [sp, #13]
  11:Lib/bq27421/bq27421.c ****     i2c_data[2] = ( uint8_t )( ( data >> 8 ) & 0x00FF );
  44              		.loc 1 11 0
  45 000c 090A     		lsrs	r1, r1, #8
  46              	.LVL1:
  47 000e 8DF80E10 		strb	r1, [sp, #14]
ARM GAS  C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s 			page 2


  12:Lib/bq27421/bq27421.c **** 
  13:Lib/bq27421/bq27421.c ****     ret = HAL_I2C_Master_Transmit( &HAL_I2C_INSTANCE, (uint16_t)BQ27421_I2C_ADDRESS, i2c_data, 3, H
  48              		.loc 1 13 0
  49 0012 0523     		movs	r3, #5
  50 0014 0093     		str	r3, [sp]
  51 0016 0323     		movs	r3, #3
  52 0018 03AA     		add	r2, sp, #12
  53 001a AA21     		movs	r1, #170
  54 001c 0648     		ldr	r0, .L6
  55              	.LVL2:
  56 001e FFF7FEFF 		bl	HAL_I2C_Master_Transmit
  57              	.LVL3:
  14:Lib/bq27421/bq27421.c ****     if( ret != HAL_OK )
  58              		.loc 1 14 0
  59 0022 18B1     		cbz	r0, .L5
  15:Lib/bq27421/bq27421.c ****     {
  16:Lib/bq27421/bq27421.c ****         return false;
  60              		.loc 1 16 0
  61 0024 0020     		movs	r0, #0
  62              	.LVL4:
  63              	.L2:
  17:Lib/bq27421/bq27421.c ****     }
  18:Lib/bq27421/bq27421.c **** 
  19:Lib/bq27421/bq27421.c ****     HAL_Delay( BQ27421_DELAY );
  20:Lib/bq27421/bq27421.c ****     
  21:Lib/bq27421/bq27421.c ****     return true;
  22:Lib/bq27421/bq27421.c **** }
  64              		.loc 1 22 0
  65 0026 05B0     		add	sp, sp, #20
  66              	.LCFI2:
  67              		.cfi_remember_state
  68              		.cfi_def_cfa_offset 4
  69              		@ sp needed
  70 0028 5DF804FB 		ldr	pc, [sp], #4
  71              	.LVL5:
  72              	.L5:
  73              	.LCFI3:
  74              		.cfi_restore_state
  19:Lib/bq27421/bq27421.c ****     
  75              		.loc 1 19 0
  76 002c 0120     		movs	r0, #1
  77              	.LVL6:
  78 002e FFF7FEFF 		bl	HAL_Delay
  79              	.LVL7:
  21:Lib/bq27421/bq27421.c **** }
  80              		.loc 1 21 0
  81 0032 0120     		movs	r0, #1
  82 0034 F7E7     		b	.L2
  83              	.L7:
  84 0036 00BF     		.align	2
  85              	.L6:
  86 0038 00000000 		.word	hi2c2
  87              		.cfi_endproc
  88              	.LFE124:
  90              		.section	.text.bq27421_i2c_command_read,"ax",%progbits
  91              		.align	1
  92              		.global	bq27421_i2c_command_read
ARM GAS  C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s 			page 3


  93              		.syntax unified
  94              		.thumb
  95              		.thumb_func
  96              		.fpu fpv4-sp-d16
  98              	bq27421_i2c_command_read:
  99              	.LFB125:
  23:Lib/bq27421/bq27421.c **** 
  24:Lib/bq27421/bq27421.c **** bool bq27421_i2c_command_read( uint8_t command, uint16_t *data )
  25:Lib/bq27421/bq27421.c **** {
 100              		.loc 1 25 0
 101              		.cfi_startproc
 102              		@ args = 0, pretend = 0, frame = 16
 103              		@ frame_needed = 0, uses_anonymous_args = 0
 104              	.LVL8:
 105 0000 10B5     		push	{r4, lr}
 106              	.LCFI4:
 107              		.cfi_def_cfa_offset 8
 108              		.cfi_offset 4, -8
 109              		.cfi_offset 14, -4
 110 0002 86B0     		sub	sp, sp, #24
 111              	.LCFI5:
 112              		.cfi_def_cfa_offset 32
 113 0004 0C46     		mov	r4, r1
 114 0006 06AA     		add	r2, sp, #24
 115 0008 02F8090D 		strb	r0, [r2, #-9]!
  26:Lib/bq27421/bq27421.c ****     HAL_StatusTypeDef ret;
  27:Lib/bq27421/bq27421.c ****     uint8_t i2c_data[2];
  28:Lib/bq27421/bq27421.c ****     
  29:Lib/bq27421/bq27421.c ****     ret = HAL_I2C_Master_Transmit( &HAL_I2C_INSTANCE, (uint16_t)BQ27421_I2C_ADDRESS, &command, 1, H
 116              		.loc 1 29 0
 117 000c 0523     		movs	r3, #5
 118 000e 0093     		str	r3, [sp]
 119 0010 0123     		movs	r3, #1
 120 0012 AA21     		movs	r1, #170
 121              	.LVL9:
 122 0014 1048     		ldr	r0, .L15
 123              	.LVL10:
 124 0016 FFF7FEFF 		bl	HAL_I2C_Master_Transmit
 125              	.LVL11:
  30:Lib/bq27421/bq27421.c ****     if( ret != HAL_OK )
 126              		.loc 1 30 0
 127 001a 10B1     		cbz	r0, .L13
  31:Lib/bq27421/bq27421.c ****     {
  32:Lib/bq27421/bq27421.c ****         return false;
 128              		.loc 1 32 0
 129 001c 0020     		movs	r0, #0
 130              	.LVL12:
 131              	.L9:
  33:Lib/bq27421/bq27421.c ****     }
  34:Lib/bq27421/bq27421.c **** 
  35:Lib/bq27421/bq27421.c ****     HAL_Delay( BQ27421_DELAY );
  36:Lib/bq27421/bq27421.c **** 
  37:Lib/bq27421/bq27421.c ****     ret = HAL_I2C_Master_Receive( &HAL_I2C_INSTANCE, (uint16_t)BQ27421_I2C_ADDRESS, i2c_data, 2, HA
  38:Lib/bq27421/bq27421.c ****     if(ret != HAL_OK )
  39:Lib/bq27421/bq27421.c ****     {
  40:Lib/bq27421/bq27421.c ****         return false;
  41:Lib/bq27421/bq27421.c ****     }
ARM GAS  C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s 			page 4


  42:Lib/bq27421/bq27421.c **** 
  43:Lib/bq27421/bq27421.c ****     HAL_Delay( BQ27421_DELAY );
  44:Lib/bq27421/bq27421.c **** 
  45:Lib/bq27421/bq27421.c ****     *data = ( i2c_data[1] << 8 ) | i2c_data[0];
  46:Lib/bq27421/bq27421.c **** 
  47:Lib/bq27421/bq27421.c ****     return true;
  48:Lib/bq27421/bq27421.c **** }
 132              		.loc 1 48 0
 133 001e 06B0     		add	sp, sp, #24
 134              	.LCFI6:
 135              		.cfi_remember_state
 136              		.cfi_def_cfa_offset 8
 137              		@ sp needed
 138 0020 10BD     		pop	{r4, pc}
 139              	.LVL13:
 140              	.L13:
 141              	.LCFI7:
 142              		.cfi_restore_state
  35:Lib/bq27421/bq27421.c **** 
 143              		.loc 1 35 0
 144 0022 0120     		movs	r0, #1
 145              	.LVL14:
 146 0024 FFF7FEFF 		bl	HAL_Delay
 147              	.LVL15:
  37:Lib/bq27421/bq27421.c ****     if(ret != HAL_OK )
 148              		.loc 1 37 0
 149 0028 0523     		movs	r3, #5
 150 002a 0093     		str	r3, [sp]
 151 002c 0223     		movs	r3, #2
 152 002e 05AA     		add	r2, sp, #20
 153 0030 AA21     		movs	r1, #170
 154 0032 0948     		ldr	r0, .L15
 155 0034 FFF7FEFF 		bl	HAL_I2C_Master_Receive
 156              	.LVL16:
  38:Lib/bq27421/bq27421.c ****     {
 157              		.loc 1 38 0
 158 0038 08B1     		cbz	r0, .L14
  40:Lib/bq27421/bq27421.c ****     }
 159              		.loc 1 40 0
 160 003a 0020     		movs	r0, #0
 161              	.LVL17:
 162 003c EFE7     		b	.L9
 163              	.LVL18:
 164              	.L14:
  43:Lib/bq27421/bq27421.c **** 
 165              		.loc 1 43 0
 166 003e 0120     		movs	r0, #1
 167              	.LVL19:
 168 0040 FFF7FEFF 		bl	HAL_Delay
 169              	.LVL20:
  45:Lib/bq27421/bq27421.c **** 
 170              		.loc 1 45 0
 171 0044 9DF81520 		ldrb	r2, [sp, #21]	@ zero_extendqisi2
 172 0048 9DF81430 		ldrb	r3, [sp, #20]	@ zero_extendqisi2
 173 004c 43EA0223 		orr	r3, r3, r2, lsl #8
 174 0050 2380     		strh	r3, [r4]	@ movhi
  47:Lib/bq27421/bq27421.c **** }
ARM GAS  C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s 			page 5


 175              		.loc 1 47 0
 176 0052 0120     		movs	r0, #1
 177 0054 E3E7     		b	.L9
 178              	.L16:
 179 0056 00BF     		.align	2
 180              	.L15:
 181 0058 00000000 		.word	hi2c2
 182              		.cfi_endproc
 183              	.LFE125:
 185              		.section	.text.bq27421_i2c_control_write,"ax",%progbits
 186              		.align	1
 187              		.global	bq27421_i2c_control_write
 188              		.syntax unified
 189              		.thumb
 190              		.thumb_func
 191              		.fpu fpv4-sp-d16
 193              	bq27421_i2c_control_write:
 194              	.LFB126:
  49:Lib/bq27421/bq27421.c **** 
  50:Lib/bq27421/bq27421.c **** bool bq27421_i2c_control_write( uint16_t subcommand )
  51:Lib/bq27421/bq27421.c **** {
 195              		.loc 1 51 0
 196              		.cfi_startproc
 197              		@ args = 0, pretend = 0, frame = 8
 198              		@ frame_needed = 0, uses_anonymous_args = 0
 199              	.LVL21:
 200 0000 10B5     		push	{r4, lr}
 201              	.LCFI8:
 202              		.cfi_def_cfa_offset 8
 203              		.cfi_offset 4, -8
 204              		.cfi_offset 14, -4
 205 0002 84B0     		sub	sp, sp, #16
 206              	.LCFI9:
 207              		.cfi_def_cfa_offset 24
 208 0004 0446     		mov	r4, r0
  52:Lib/bq27421/bq27421.c ****     HAL_StatusTypeDef ret;
  53:Lib/bq27421/bq27421.c ****     uint8_t i2c_data[2];
  54:Lib/bq27421/bq27421.c **** 
  55:Lib/bq27421/bq27421.c ****     i2c_data[0] = BQ27421_CONTROL_LOW;
 209              		.loc 1 55 0
 210 0006 0023     		movs	r3, #0
 211 0008 8DF80C30 		strb	r3, [sp, #12]
  56:Lib/bq27421/bq27421.c ****     i2c_data[1] = (uint8_t)( ( subcommand ) & 0x00FF );
 212              		.loc 1 56 0
 213 000c 8DF80D00 		strb	r0, [sp, #13]
  57:Lib/bq27421/bq27421.c ****     
  58:Lib/bq27421/bq27421.c **** 
  59:Lib/bq27421/bq27421.c ****     ret = HAL_I2C_Master_Transmit( &HAL_I2C_INSTANCE, (uint16_t)BQ27421_I2C_ADDRESS, i2c_data, 2, H
 214              		.loc 1 59 0
 215 0010 0523     		movs	r3, #5
 216 0012 0093     		str	r3, [sp]
 217 0014 0223     		movs	r3, #2
 218 0016 03AA     		add	r2, sp, #12
 219 0018 AA21     		movs	r1, #170
 220 001a 1048     		ldr	r0, .L24
 221              	.LVL22:
 222 001c FFF7FEFF 		bl	HAL_I2C_Master_Transmit
ARM GAS  C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s 			page 6


 223              	.LVL23:
  60:Lib/bq27421/bq27421.c ****     if( ret != HAL_OK )
 224              		.loc 1 60 0
 225 0020 10B1     		cbz	r0, .L22
  61:Lib/bq27421/bq27421.c ****     {
  62:Lib/bq27421/bq27421.c ****         return false;
 226              		.loc 1 62 0
 227 0022 0020     		movs	r0, #0
 228              	.LVL24:
 229              	.L18:
  63:Lib/bq27421/bq27421.c ****     }
  64:Lib/bq27421/bq27421.c **** 
  65:Lib/bq27421/bq27421.c ****     HAL_Delay( BQ27421_DELAY );
  66:Lib/bq27421/bq27421.c **** 
  67:Lib/bq27421/bq27421.c ****     i2c_data[0] = BQ27421_CONTROL_HIGH;
  68:Lib/bq27421/bq27421.c ****     i2c_data[1] = (uint8_t)( ( subcommand >> 8 ) & 0x00FF );
  69:Lib/bq27421/bq27421.c **** 
  70:Lib/bq27421/bq27421.c ****     ret = HAL_I2C_Master_Transmit( &HAL_I2C_INSTANCE, (uint16_t)BQ27421_I2C_ADDRESS, i2c_data, 2, H
  71:Lib/bq27421/bq27421.c ****     if( ret != HAL_OK )
  72:Lib/bq27421/bq27421.c ****     {
  73:Lib/bq27421/bq27421.c ****         return false;
  74:Lib/bq27421/bq27421.c ****     }
  75:Lib/bq27421/bq27421.c **** 
  76:Lib/bq27421/bq27421.c ****     HAL_Delay( BQ27421_DELAY );
  77:Lib/bq27421/bq27421.c **** 
  78:Lib/bq27421/bq27421.c ****     return true;
  79:Lib/bq27421/bq27421.c **** }
 230              		.loc 1 79 0
 231 0024 04B0     		add	sp, sp, #16
 232              	.LCFI10:
 233              		.cfi_remember_state
 234              		.cfi_def_cfa_offset 8
 235              		@ sp needed
 236 0026 10BD     		pop	{r4, pc}
 237              	.LVL25:
 238              	.L22:
 239              	.LCFI11:
 240              		.cfi_restore_state
  65:Lib/bq27421/bq27421.c **** 
 241              		.loc 1 65 0
 242 0028 0120     		movs	r0, #1
 243              	.LVL26:
 244 002a FFF7FEFF 		bl	HAL_Delay
 245              	.LVL27:
  67:Lib/bq27421/bq27421.c ****     i2c_data[1] = (uint8_t)( ( subcommand >> 8 ) & 0x00FF );
 246              		.loc 1 67 0
 247 002e 0123     		movs	r3, #1
 248 0030 8DF80C30 		strb	r3, [sp, #12]
  68:Lib/bq27421/bq27421.c **** 
 249              		.loc 1 68 0
 250 0034 240A     		lsrs	r4, r4, #8
 251 0036 8DF80D40 		strb	r4, [sp, #13]
  70:Lib/bq27421/bq27421.c ****     if( ret != HAL_OK )
 252              		.loc 1 70 0
 253 003a 0523     		movs	r3, #5
 254 003c 0093     		str	r3, [sp]
 255 003e 0223     		movs	r3, #2
ARM GAS  C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s 			page 7


 256 0040 03AA     		add	r2, sp, #12
 257 0042 AA21     		movs	r1, #170
 258 0044 0548     		ldr	r0, .L24
 259 0046 FFF7FEFF 		bl	HAL_I2C_Master_Transmit
 260              	.LVL28:
  71:Lib/bq27421/bq27421.c ****     {
 261              		.loc 1 71 0
 262 004a 08B1     		cbz	r0, .L23
  73:Lib/bq27421/bq27421.c ****     }
 263              		.loc 1 73 0
 264 004c 0020     		movs	r0, #0
 265              	.LVL29:
 266 004e E9E7     		b	.L18
 267              	.LVL30:
 268              	.L23:
  76:Lib/bq27421/bq27421.c **** 
 269              		.loc 1 76 0
 270 0050 0120     		movs	r0, #1
 271              	.LVL31:
 272 0052 FFF7FEFF 		bl	HAL_Delay
 273              	.LVL32:
  78:Lib/bq27421/bq27421.c **** }
 274              		.loc 1 78 0
 275 0056 0120     		movs	r0, #1
 276 0058 E4E7     		b	.L18
 277              	.L25:
 278 005a 00BF     		.align	2
 279              	.L24:
 280 005c 00000000 		.word	hi2c2
 281              		.cfi_endproc
 282              	.LFE126:
 284              		.section	.text.bq27421_i2c_control_read,"ax",%progbits
 285              		.align	1
 286              		.global	bq27421_i2c_control_read
 287              		.syntax unified
 288              		.thumb
 289              		.thumb_func
 290              		.fpu fpv4-sp-d16
 292              	bq27421_i2c_control_read:
 293              	.LFB127:
  80:Lib/bq27421/bq27421.c **** 
  81:Lib/bq27421/bq27421.c **** bool bq27421_i2c_control_read( uint16_t subcommand, uint16_t *data )
  82:Lib/bq27421/bq27421.c **** {
 294              		.loc 1 82 0
 295              		.cfi_startproc
 296              		@ args = 0, pretend = 0, frame = 8
 297              		@ frame_needed = 0, uses_anonymous_args = 0
 298              	.LVL33:
 299 0000 30B5     		push	{r4, r5, lr}
 300              	.LCFI12:
 301              		.cfi_def_cfa_offset 12
 302              		.cfi_offset 4, -12
 303              		.cfi_offset 5, -8
 304              		.cfi_offset 14, -4
 305 0002 85B0     		sub	sp, sp, #20
 306              	.LCFI13:
 307              		.cfi_def_cfa_offset 32
ARM GAS  C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s 			page 8


 308 0004 0446     		mov	r4, r0
 309 0006 0D46     		mov	r5, r1
  83:Lib/bq27421/bq27421.c ****     HAL_StatusTypeDef ret;
  84:Lib/bq27421/bq27421.c ****     uint8_t i2c_data[2];
  85:Lib/bq27421/bq27421.c **** 
  86:Lib/bq27421/bq27421.c ****     i2c_data[0] = BQ27421_CONTROL_LOW;
 310              		.loc 1 86 0
 311 0008 0023     		movs	r3, #0
 312 000a 8DF80C30 		strb	r3, [sp, #12]
  87:Lib/bq27421/bq27421.c ****     i2c_data[1] = (uint8_t)( ( subcommand ) & 0x00FF );
 313              		.loc 1 87 0
 314 000e 8DF80D00 		strb	r0, [sp, #13]
  88:Lib/bq27421/bq27421.c **** 
  89:Lib/bq27421/bq27421.c ****     ret = HAL_I2C_Master_Transmit( &HAL_I2C_INSTANCE, (uint16_t)BQ27421_I2C_ADDRESS, i2c_data, 2, H
 315              		.loc 1 89 0
 316 0012 0523     		movs	r3, #5
 317 0014 0093     		str	r3, [sp]
 318 0016 0223     		movs	r3, #2
 319 0018 03AA     		add	r2, sp, #12
 320 001a AA21     		movs	r1, #170
 321              	.LVL34:
 322 001c 1A48     		ldr	r0, .L35
 323              	.LVL35:
 324 001e FFF7FEFF 		bl	HAL_I2C_Master_Transmit
 325              	.LVL36:
  90:Lib/bq27421/bq27421.c ****     if( ret != HAL_OK )
 326              		.loc 1 90 0
 327 0022 10B1     		cbz	r0, .L32
  91:Lib/bq27421/bq27421.c ****     {
  92:Lib/bq27421/bq27421.c ****         return false;
 328              		.loc 1 92 0
 329 0024 0020     		movs	r0, #0
 330              	.LVL37:
 331              	.L27:
  93:Lib/bq27421/bq27421.c ****     }
  94:Lib/bq27421/bq27421.c **** 
  95:Lib/bq27421/bq27421.c ****     HAL_Delay( BQ27421_DELAY );
  96:Lib/bq27421/bq27421.c **** 
  97:Lib/bq27421/bq27421.c ****     i2c_data[0] = BQ27421_CONTROL_HIGH;
  98:Lib/bq27421/bq27421.c ****     i2c_data[1] = (uint8_t)( ( subcommand >> 8 ) & 0x00FF );
  99:Lib/bq27421/bq27421.c **** 
 100:Lib/bq27421/bq27421.c ****     ret = HAL_I2C_Master_Transmit( &HAL_I2C_INSTANCE, (uint16_t)BQ27421_I2C_ADDRESS, i2c_data, 2, H
 101:Lib/bq27421/bq27421.c ****     if( ret != HAL_OK )
 102:Lib/bq27421/bq27421.c ****     {
 103:Lib/bq27421/bq27421.c ****         return false;
 104:Lib/bq27421/bq27421.c ****     }
 105:Lib/bq27421/bq27421.c **** 
 106:Lib/bq27421/bq27421.c ****     HAL_Delay( BQ27421_DELAY );
 107:Lib/bq27421/bq27421.c **** 
 108:Lib/bq27421/bq27421.c ****     ret = HAL_I2C_Master_Receive( &HAL_I2C_INSTANCE, (uint16_t)BQ27421_I2C_ADDRESS, i2c_data, 2, HA
 109:Lib/bq27421/bq27421.c ****     if(ret != HAL_OK )
 110:Lib/bq27421/bq27421.c ****     {
 111:Lib/bq27421/bq27421.c ****         return false;
 112:Lib/bq27421/bq27421.c ****     }
 113:Lib/bq27421/bq27421.c **** 
 114:Lib/bq27421/bq27421.c ****     HAL_Delay( BQ27421_DELAY );
 115:Lib/bq27421/bq27421.c **** 
ARM GAS  C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s 			page 9


 116:Lib/bq27421/bq27421.c ****     *data = ( i2c_data[1] << 8 ) | i2c_data[0];
 117:Lib/bq27421/bq27421.c **** 
 118:Lib/bq27421/bq27421.c ****     return true;
 119:Lib/bq27421/bq27421.c **** }
 332              		.loc 1 119 0
 333 0026 05B0     		add	sp, sp, #20
 334              	.LCFI14:
 335              		.cfi_remember_state
 336              		.cfi_def_cfa_offset 12
 337              		@ sp needed
 338 0028 30BD     		pop	{r4, r5, pc}
 339              	.LVL38:
 340              	.L32:
 341              	.LCFI15:
 342              		.cfi_restore_state
  95:Lib/bq27421/bq27421.c **** 
 343              		.loc 1 95 0
 344 002a 0120     		movs	r0, #1
 345              	.LVL39:
 346 002c FFF7FEFF 		bl	HAL_Delay
 347              	.LVL40:
  97:Lib/bq27421/bq27421.c ****     i2c_data[1] = (uint8_t)( ( subcommand >> 8 ) & 0x00FF );
 348              		.loc 1 97 0
 349 0030 0123     		movs	r3, #1
 350 0032 8DF80C30 		strb	r3, [sp, #12]
  98:Lib/bq27421/bq27421.c **** 
 351              		.loc 1 98 0
 352 0036 240A     		lsrs	r4, r4, #8
 353 0038 8DF80D40 		strb	r4, [sp, #13]
 100:Lib/bq27421/bq27421.c ****     if( ret != HAL_OK )
 354              		.loc 1 100 0
 355 003c 0523     		movs	r3, #5
 356 003e 0093     		str	r3, [sp]
 357 0040 0223     		movs	r3, #2
 358 0042 03AA     		add	r2, sp, #12
 359 0044 AA21     		movs	r1, #170
 360 0046 1048     		ldr	r0, .L35
 361 0048 FFF7FEFF 		bl	HAL_I2C_Master_Transmit
 362              	.LVL41:
 101:Lib/bq27421/bq27421.c ****     {
 363              		.loc 1 101 0
 364 004c 08B1     		cbz	r0, .L33
 103:Lib/bq27421/bq27421.c ****     }
 365              		.loc 1 103 0
 366 004e 0020     		movs	r0, #0
 367              	.LVL42:
 368 0050 E9E7     		b	.L27
 369              	.LVL43:
 370              	.L33:
 106:Lib/bq27421/bq27421.c **** 
 371              		.loc 1 106 0
 372 0052 0120     		movs	r0, #1
 373              	.LVL44:
 374 0054 FFF7FEFF 		bl	HAL_Delay
 375              	.LVL45:
 108:Lib/bq27421/bq27421.c ****     if(ret != HAL_OK )
 376              		.loc 1 108 0
ARM GAS  C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s 			page 10


 377 0058 0523     		movs	r3, #5
 378 005a 0093     		str	r3, [sp]
 379 005c 0223     		movs	r3, #2
 380 005e 03AA     		add	r2, sp, #12
 381 0060 AA21     		movs	r1, #170
 382 0062 0948     		ldr	r0, .L35
 383 0064 FFF7FEFF 		bl	HAL_I2C_Master_Receive
 384              	.LVL46:
 109:Lib/bq27421/bq27421.c ****     {
 385              		.loc 1 109 0
 386 0068 08B1     		cbz	r0, .L34
 111:Lib/bq27421/bq27421.c ****     }
 387              		.loc 1 111 0
 388 006a 0020     		movs	r0, #0
 389              	.LVL47:
 390 006c DBE7     		b	.L27
 391              	.LVL48:
 392              	.L34:
 114:Lib/bq27421/bq27421.c **** 
 393              		.loc 1 114 0
 394 006e 0120     		movs	r0, #1
 395              	.LVL49:
 396 0070 FFF7FEFF 		bl	HAL_Delay
 397              	.LVL50:
 116:Lib/bq27421/bq27421.c **** 
 398              		.loc 1 116 0
 399 0074 9DF80D20 		ldrb	r2, [sp, #13]	@ zero_extendqisi2
 400 0078 9DF80C30 		ldrb	r3, [sp, #12]	@ zero_extendqisi2
 401 007c 43EA0223 		orr	r3, r3, r2, lsl #8
 402 0080 2B80     		strh	r3, [r5]	@ movhi
 118:Lib/bq27421/bq27421.c **** }
 403              		.loc 1 118 0
 404 0082 0120     		movs	r0, #1
 405 0084 CFE7     		b	.L27
 406              	.L36:
 407 0086 00BF     		.align	2
 408              	.L35:
 409 0088 00000000 		.word	hi2c2
 410              		.cfi_endproc
 411              	.LFE127:
 413              		.section	.text.bq27421_i2c_write_data_block,"ax",%progbits
 414              		.align	1
 415              		.global	bq27421_i2c_write_data_block
 416              		.syntax unified
 417              		.thumb
 418              		.thumb_func
 419              		.fpu fpv4-sp-d16
 421              	bq27421_i2c_write_data_block:
 422              	.LFB128:
 120:Lib/bq27421/bq27421.c **** 
 121:Lib/bq27421/bq27421.c **** bool bq27421_i2c_write_data_block( uint8_t offset, uint8_t *data, uint8_t bytes )
 122:Lib/bq27421/bq27421.c **** {
 423              		.loc 1 122 0
 424              		.cfi_startproc
 425              		@ args = 0, pretend = 0, frame = 8
 426              		@ frame_needed = 0, uses_anonymous_args = 0
 427              	.LVL51:
ARM GAS  C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s 			page 11


 428 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 429              	.LCFI16:
 430              		.cfi_def_cfa_offset 20
 431              		.cfi_offset 4, -20
 432              		.cfi_offset 5, -16
 433              		.cfi_offset 6, -12
 434              		.cfi_offset 7, -8
 435              		.cfi_offset 14, -4
 436 0002 85B0     		sub	sp, sp, #20
 437              	.LCFI17:
 438              		.cfi_def_cfa_offset 40
 439 0004 0746     		mov	r7, r0
 440 0006 0E46     		mov	r6, r1
 441 0008 1546     		mov	r5, r2
 442              	.LVL52:
 123:Lib/bq27421/bq27421.c ****     HAL_StatusTypeDef ret;
 124:Lib/bq27421/bq27421.c ****     uint8_t i2c_data[2], i;
 125:Lib/bq27421/bq27421.c **** 
 126:Lib/bq27421/bq27421.c ****     for( i = 0; i < bytes; i++ )
 443              		.loc 1 126 0
 444 000a 0024     		movs	r4, #0
 445              	.LVL53:
 446              	.L38:
 447              		.loc 1 126 0 is_stmt 0 discriminator 1
 448 000c AC42     		cmp	r4, r5
 449 000e 15D2     		bcs	.L43
 127:Lib/bq27421/bq27421.c ****     {
 128:Lib/bq27421/bq27421.c ****         i2c_data[0] = BQ27421_BLOCK_DATA_START + offset + i;
 450              		.loc 1 128 0 is_stmt 1
 451 0010 E319     		adds	r3, r4, r7
 452 0012 4033     		adds	r3, r3, #64
 453 0014 8DF80C30 		strb	r3, [sp, #12]
 129:Lib/bq27421/bq27421.c ****         i2c_data[1] = data[i];
 454              		.loc 1 129 0
 455 0018 335D     		ldrb	r3, [r6, r4]	@ zero_extendqisi2
 456 001a 8DF80D30 		strb	r3, [sp, #13]
 130:Lib/bq27421/bq27421.c **** 
 131:Lib/bq27421/bq27421.c ****         ret = HAL_I2C_Master_Transmit( &HAL_I2C_INSTANCE, (uint16_t)BQ27421_I2C_ADDRESS, i2c_data, 
 457              		.loc 1 131 0
 458 001e 0523     		movs	r3, #5
 459 0020 0093     		str	r3, [sp]
 460 0022 0223     		movs	r3, #2
 461 0024 03AA     		add	r2, sp, #12
 462 0026 AA21     		movs	r1, #170
 463 0028 0748     		ldr	r0, .L44
 464 002a FFF7FEFF 		bl	HAL_I2C_Master_Transmit
 465              	.LVL54:
 132:Lib/bq27421/bq27421.c ****         if( ret != HAL_OK )
 466              		.loc 1 132 0
 467 002e 40B9     		cbnz	r0, .L41
 133:Lib/bq27421/bq27421.c ****         {
 134:Lib/bq27421/bq27421.c ****             return false;
 135:Lib/bq27421/bq27421.c ****         }
 136:Lib/bq27421/bq27421.c ****         HAL_Delay( BQ27421_DELAY );
 468              		.loc 1 136 0 discriminator 2
 469 0030 0120     		movs	r0, #1
 470              	.LVL55:
ARM GAS  C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s 			page 12


 471 0032 FFF7FEFF 		bl	HAL_Delay
 472              	.LVL56:
 126:Lib/bq27421/bq27421.c ****     {
 473              		.loc 1 126 0 discriminator 2
 474 0036 0134     		adds	r4, r4, #1
 475              	.LVL57:
 476 0038 E4B2     		uxtb	r4, r4
 477              	.LVL58:
 478 003a E7E7     		b	.L38
 479              	.L43:
 137:Lib/bq27421/bq27421.c ****     }
 138:Lib/bq27421/bq27421.c **** 
 139:Lib/bq27421/bq27421.c ****     return true;
 480              		.loc 1 139 0
 481 003c 0120     		movs	r0, #1
 482              	.L39:
 140:Lib/bq27421/bq27421.c **** }
 483              		.loc 1 140 0
 484 003e 05B0     		add	sp, sp, #20
 485              	.LCFI18:
 486              		.cfi_remember_state
 487              		.cfi_def_cfa_offset 20
 488              		@ sp needed
 489 0040 F0BD     		pop	{r4, r5, r6, r7, pc}
 490              	.LVL59:
 491              	.L41:
 492              	.LCFI19:
 493              		.cfi_restore_state
 134:Lib/bq27421/bq27421.c ****         }
 494              		.loc 1 134 0
 495 0042 0020     		movs	r0, #0
 496              	.LVL60:
 497 0044 FBE7     		b	.L39
 498              	.L45:
 499 0046 00BF     		.align	2
 500              	.L44:
 501 0048 00000000 		.word	hi2c2
 502              		.cfi_endproc
 503              	.LFE128:
 505              		.section	.text.bq27421_i2c_read_data_block,"ax",%progbits
 506              		.align	1
 507              		.global	bq27421_i2c_read_data_block
 508              		.syntax unified
 509              		.thumb
 510              		.thumb_func
 511              		.fpu fpv4-sp-d16
 513              	bq27421_i2c_read_data_block:
 514              	.LFB129:
 141:Lib/bq27421/bq27421.c **** 
 142:Lib/bq27421/bq27421.c **** bool bq27421_i2c_read_data_block( uint8_t offset, uint8_t *data, uint8_t bytes )
 143:Lib/bq27421/bq27421.c **** {
 515              		.loc 1 143 0
 516              		.cfi_startproc
 517              		@ args = 0, pretend = 0, frame = 8
 518              		@ frame_needed = 0, uses_anonymous_args = 0
 519              	.LVL61:
 520 0000 30B5     		push	{r4, r5, lr}
ARM GAS  C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s 			page 13


 521              	.LCFI20:
 522              		.cfi_def_cfa_offset 12
 523              		.cfi_offset 4, -12
 524              		.cfi_offset 5, -8
 525              		.cfi_offset 14, -4
 526 0002 85B0     		sub	sp, sp, #20
 527              	.LCFI21:
 528              		.cfi_def_cfa_offset 32
 529 0004 0C46     		mov	r4, r1
 530 0006 1546     		mov	r5, r2
 144:Lib/bq27421/bq27421.c ****     HAL_StatusTypeDef ret;
 145:Lib/bq27421/bq27421.c **** 
 146:Lib/bq27421/bq27421.c ****     uint8_t i2c_data;
 147:Lib/bq27421/bq27421.c **** 
 148:Lib/bq27421/bq27421.c ****     i2c_data = BQ27421_BLOCK_DATA_START + offset;
 531              		.loc 1 148 0
 532 0008 4030     		adds	r0, r0, #64
 533              	.LVL62:
 534 000a 04AA     		add	r2, sp, #16
 535              	.LVL63:
 536 000c 02F8010D 		strb	r0, [r2, #-1]!
 149:Lib/bq27421/bq27421.c ****  
 150:Lib/bq27421/bq27421.c ****     ret = HAL_I2C_Master_Transmit( &HAL_I2C_INSTANCE, (uint16_t)BQ27421_I2C_ADDRESS, &i2c_data, 1, 
 537              		.loc 1 150 0
 538 0010 0523     		movs	r3, #5
 539 0012 0093     		str	r3, [sp]
 540 0014 0123     		movs	r3, #1
 541 0016 AA21     		movs	r1, #170
 542              	.LVL64:
 543 0018 0C48     		ldr	r0, .L53
 544 001a FFF7FEFF 		bl	HAL_I2C_Master_Transmit
 545              	.LVL65:
 151:Lib/bq27421/bq27421.c ****     if( ret != HAL_OK )
 546              		.loc 1 151 0
 547 001e 10B1     		cbz	r0, .L51
 152:Lib/bq27421/bq27421.c ****     {
 153:Lib/bq27421/bq27421.c ****         return false;
 548              		.loc 1 153 0
 549 0020 0020     		movs	r0, #0
 550              	.LVL66:
 551              	.L47:
 154:Lib/bq27421/bq27421.c ****     }
 155:Lib/bq27421/bq27421.c **** 
 156:Lib/bq27421/bq27421.c ****     HAL_Delay( 5 );
 157:Lib/bq27421/bq27421.c **** 
 158:Lib/bq27421/bq27421.c ****     ret = HAL_I2C_Master_Receive( &HAL_I2C_INSTANCE, (uint16_t)BQ27421_I2C_ADDRESS, data, bytes, HA
 159:Lib/bq27421/bq27421.c ****     if( ret != HAL_OK )
 160:Lib/bq27421/bq27421.c ****     {
 161:Lib/bq27421/bq27421.c ****         return false;
 162:Lib/bq27421/bq27421.c ****     }
 163:Lib/bq27421/bq27421.c **** 
 164:Lib/bq27421/bq27421.c ****     HAL_Delay( BQ27421_DELAY );
 165:Lib/bq27421/bq27421.c **** 
 166:Lib/bq27421/bq27421.c ****     return true;
 167:Lib/bq27421/bq27421.c **** }
 552              		.loc 1 167 0
 553 0022 05B0     		add	sp, sp, #20
ARM GAS  C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s 			page 14


 554              	.LCFI22:
 555              		.cfi_remember_state
 556              		.cfi_def_cfa_offset 12
 557              		@ sp needed
 558 0024 30BD     		pop	{r4, r5, pc}
 559              	.LVL67:
 560              	.L51:
 561              	.LCFI23:
 562              		.cfi_restore_state
 156:Lib/bq27421/bq27421.c **** 
 563              		.loc 1 156 0
 564 0026 0520     		movs	r0, #5
 565              	.LVL68:
 566 0028 FFF7FEFF 		bl	HAL_Delay
 567              	.LVL69:
 158:Lib/bq27421/bq27421.c ****     if( ret != HAL_OK )
 568              		.loc 1 158 0
 569 002c 0523     		movs	r3, #5
 570 002e 0093     		str	r3, [sp]
 571 0030 2B46     		mov	r3, r5
 572 0032 2246     		mov	r2, r4
 573 0034 AA21     		movs	r1, #170
 574 0036 0548     		ldr	r0, .L53
 575 0038 FFF7FEFF 		bl	HAL_I2C_Master_Receive
 576              	.LVL70:
 159:Lib/bq27421/bq27421.c ****     {
 577              		.loc 1 159 0
 578 003c 08B1     		cbz	r0, .L52
 161:Lib/bq27421/bq27421.c ****     }
 579              		.loc 1 161 0
 580 003e 0020     		movs	r0, #0
 581              	.LVL71:
 582 0040 EFE7     		b	.L47
 583              	.LVL72:
 584              	.L52:
 164:Lib/bq27421/bq27421.c **** 
 585              		.loc 1 164 0
 586 0042 0120     		movs	r0, #1
 587              	.LVL73:
 588 0044 FFF7FEFF 		bl	HAL_Delay
 589              	.LVL74:
 166:Lib/bq27421/bq27421.c **** }
 590              		.loc 1 166 0
 591 0048 0120     		movs	r0, #1
 592 004a EAE7     		b	.L47
 593              	.L54:
 594              		.align	2
 595              	.L53:
 596 004c 00000000 		.word	hi2c2
 597              		.cfi_endproc
 598              	.LFE129:
 600              		.global	__aeabi_i2d
 601              		.global	__aeabi_dmul
 602              		.global	__aeabi_d2uiz
 603              		.global	__aeabi_ddiv
 604              		.section	.text.bq27421_init,"ax",%progbits
 605              		.align	1
ARM GAS  C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s 			page 15


 606              		.global	bq27421_init
 607              		.syntax unified
 608              		.thumb
 609              		.thumb_func
 610              		.fpu fpv4-sp-d16
 612              	bq27421_init:
 613              	.LFB130:
 168:Lib/bq27421/bq27421.c **** 
 169:Lib/bq27421/bq27421.c **** bool bq27421_init( uint16_t designCapacity_mAh, uint16_t terminateVoltage_mV, uint16_t taperCurrent
 170:Lib/bq27421/bq27421.c **** {
 614              		.loc 1 170 0
 615              		.cfi_startproc
 616              		@ args = 0, pretend = 0, frame = 40
 617              		@ frame_needed = 0, uses_anonymous_args = 0
 618              	.LVL75:
 619 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 620              	.LCFI24:
 621              		.cfi_def_cfa_offset 28
 622              		.cfi_offset 4, -28
 623              		.cfi_offset 5, -24
 624              		.cfi_offset 6, -20
 625              		.cfi_offset 7, -16
 626              		.cfi_offset 8, -12
 627              		.cfi_offset 9, -8
 628              		.cfi_offset 14, -4
 629 0004 8BB0     		sub	sp, sp, #44
 630              	.LCFI25:
 631              		.cfi_def_cfa_offset 72
 632 0006 0746     		mov	r7, r0
 633 0008 0D46     		mov	r5, r1
 634 000a 1446     		mov	r4, r2
 171:Lib/bq27421/bq27421.c ****     uint16_t designEnergy_mWh, taperRate, flags, checksumOld, checksumRead;
 172:Lib/bq27421/bq27421.c ****     uint8_t checksumNew;
 173:Lib/bq27421/bq27421.c ****     
 174:Lib/bq27421/bq27421.c **** 
 175:Lib/bq27421/bq27421.c ****     designEnergy_mWh = 3.7 * designCapacity_mAh;
 635              		.loc 1 175 0
 636 000c FFF7FEFF 		bl	__aeabi_i2d
 637              	.LVL76:
 638 0010 8046     		mov	r8, r0
 639 0012 8946     		mov	r9, r1
 640 0014 9AA3     		adr	r3, .L80
 641 0016 D3E90023 		ldrd	r2, [r3]
 642 001a FFF7FEFF 		bl	__aeabi_dmul
 643              	.LVL77:
 644 001e FFF7FEFF 		bl	__aeabi_d2uiz
 645              	.LVL78:
 646 0022 86B2     		uxth	r6, r0
 647              	.LVL79:
 176:Lib/bq27421/bq27421.c ****     taperRate = designCapacity_mAh / ( 0.1 * taperCurrent_mA );
 648              		.loc 1 176 0
 649 0024 2046     		mov	r0, r4
 650 0026 FFF7FEFF 		bl	__aeabi_i2d
 651              	.LVL80:
 652 002a 97A3     		adr	r3, .L80+8
 653 002c D3E90023 		ldrd	r2, [r3]
 654 0030 FFF7FEFF 		bl	__aeabi_dmul
ARM GAS  C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s 			page 16


 655              	.LVL81:
 656 0034 0246     		mov	r2, r0
 657 0036 0B46     		mov	r3, r1
 658 0038 4046     		mov	r0, r8
 659 003a 4946     		mov	r1, r9
 660 003c FFF7FEFF 		bl	__aeabi_ddiv
 661              	.LVL82:
 662 0040 FFF7FEFF 		bl	__aeabi_d2uiz
 663              	.LVL83:
 664 0044 84B2     		uxth	r4, r0
 665              	.LVL84:
 177:Lib/bq27421/bq27421.c **** 
 178:Lib/bq27421/bq27421.c ****     // Unseal gauge
 179:Lib/bq27421/bq27421.c ****     bq27421_i2c_control_write( BQ27421_CONTROL_UNSEAL );
 666              		.loc 1 179 0
 667 0046 4FF40040 		mov	r0, #32768
 668 004a FFF7FEFF 		bl	bq27421_i2c_control_write
 669              	.LVL85:
 180:Lib/bq27421/bq27421.c ****     bq27421_i2c_control_write( BQ27421_CONTROL_UNSEAL );
 670              		.loc 1 180 0
 671 004e 4FF40040 		mov	r0, #32768
 672 0052 FFF7FEFF 		bl	bq27421_i2c_control_write
 673              	.LVL86:
 181:Lib/bq27421/bq27421.c **** 
 182:Lib/bq27421/bq27421.c ****     // Send CFG_UPDATE
 183:Lib/bq27421/bq27421.c ****     bq27421_i2c_control_write( BQ27421_CONTROL_SET_CFGUPDATE );
 674              		.loc 1 183 0
 675 0056 1320     		movs	r0, #19
 676 0058 FFF7FEFF 		bl	bq27421_i2c_control_write
 677              	.LVL87:
 678 005c 04E0     		b	.L57
 679              	.L56:
 184:Lib/bq27421/bq27421.c **** 
 185:Lib/bq27421/bq27421.c ****     // Poll flags
 186:Lib/bq27421/bq27421.c ****     do
 187:Lib/bq27421/bq27421.c ****     {
 188:Lib/bq27421/bq27421.c ****         bq27421_i2c_command_read( BQ27421_FLAGS_LOW, &flags );
 189:Lib/bq27421/bq27421.c ****         if( !(flags & 0x0010) )
 190:Lib/bq27421/bq27421.c ****         {
 191:Lib/bq27421/bq27421.c ****             HAL_Delay( 50 );
 192:Lib/bq27421/bq27421.c ****         }
 193:Lib/bq27421/bq27421.c ****     }
 194:Lib/bq27421/bq27421.c ****     while( !(flags & 0x0010) );
 680              		.loc 1 194 0
 681 005e BDF82630 		ldrh	r3, [sp, #38]
 682 0062 13F0100F 		tst	r3, #16
 683 0066 0DD1     		bne	.L76
 684              	.L57:
 188:Lib/bq27421/bq27421.c ****         if( !(flags & 0x0010) )
 685              		.loc 1 188 0
 686 0068 0DF12601 		add	r1, sp, #38
 687 006c 0620     		movs	r0, #6
 688 006e FFF7FEFF 		bl	bq27421_i2c_command_read
 689              	.LVL88:
 189:Lib/bq27421/bq27421.c ****         {
 690              		.loc 1 189 0
 691 0072 BDF82630 		ldrh	r3, [sp, #38]
ARM GAS  C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s 			page 17


 692 0076 13F0100F 		tst	r3, #16
 693 007a F0D1     		bne	.L56
 191:Lib/bq27421/bq27421.c ****         }
 694              		.loc 1 191 0
 695 007c 3220     		movs	r0, #50
 696 007e FFF7FEFF 		bl	HAL_Delay
 697              	.LVL89:
 698 0082 ECE7     		b	.L56
 699              	.L76:
 195:Lib/bq27421/bq27421.c **** 
 196:Lib/bq27421/bq27421.c ****     // Enable Block Data Memory Control
 197:Lib/bq27421/bq27421.c ****     bq27421_i2c_command_write( BQ27421_BLOCK_DATA_CONTROL, 0x0000 );
 700              		.loc 1 197 0
 701 0084 0021     		movs	r1, #0
 702 0086 6120     		movs	r0, #97
 703 0088 FFF7FEFF 		bl	bq27421_i2c_command_write
 704              	.LVL90:
 198:Lib/bq27421/bq27421.c **** 
 199:Lib/bq27421/bq27421.c ****     HAL_Delay( BQ27421_DELAY );
 705              		.loc 1 199 0
 706 008c 0120     		movs	r0, #1
 707 008e FFF7FEFF 		bl	HAL_Delay
 708              	.LVL91:
 200:Lib/bq27421/bq27421.c ****     
 201:Lib/bq27421/bq27421.c ****     // Access State subclass
 202:Lib/bq27421/bq27421.c ****     bq27421_i2c_command_write( BQ27421_DATA_CLASS, 0x0052 );
 709              		.loc 1 202 0
 710 0092 5221     		movs	r1, #82
 711 0094 3E20     		movs	r0, #62
 712 0096 FFF7FEFF 		bl	bq27421_i2c_command_write
 713              	.LVL92:
 203:Lib/bq27421/bq27421.c **** 
 204:Lib/bq27421/bq27421.c ****     // Write the block offset
 205:Lib/bq27421/bq27421.c ****     bq27421_i2c_command_write( BQ27421_DATA_BLOCK, 0x0000 );
 714              		.loc 1 205 0
 715 009a 0021     		movs	r1, #0
 716 009c 3F20     		movs	r0, #63
 717 009e FFF7FEFF 		bl	bq27421_i2c_command_write
 718              	.LVL93:
 206:Lib/bq27421/bq27421.c **** 
 207:Lib/bq27421/bq27421.c ****     // Read block checksum
 208:Lib/bq27421/bq27421.c ****     bq27421_i2c_command_read( BQ27421_BLOCK_DATA_CHECKSUM, &checksumOld );
 719              		.loc 1 208 0
 720 00a2 09A9     		add	r1, sp, #36
 721 00a4 6020     		movs	r0, #96
 722 00a6 FFF7FEFF 		bl	bq27421_i2c_command_read
 723              	.LVL94:
 724              	.LBB2:
 209:Lib/bq27421/bq27421.c **** 
 210:Lib/bq27421/bq27421.c ****     // Read 32-byte block of data
 211:Lib/bq27421/bq27421.c ****     uint8_t block[32];
 212:Lib/bq27421/bq27421.c ****     for(uint8_t i = 0; i < 32; i++ )
 725              		.loc 1 212 0
 726 00aa 0023     		movs	r3, #0
 727 00ac 06E0     		b	.L58
 728              	.LVL95:
 729              	.L59:
ARM GAS  C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s 			page 18


 213:Lib/bq27421/bq27421.c ****     {
 214:Lib/bq27421/bq27421.c ****         block[i] = 0x00;
 730              		.loc 1 214 0 discriminator 3
 731 00ae 0AAA     		add	r2, sp, #40
 732 00b0 1A44     		add	r2, r2, r3
 733 00b2 0021     		movs	r1, #0
 734 00b4 02F8281C 		strb	r1, [r2, #-40]
 212:Lib/bq27421/bq27421.c ****     {
 735              		.loc 1 212 0 discriminator 3
 736 00b8 0133     		adds	r3, r3, #1
 737              	.LVL96:
 738 00ba DBB2     		uxtb	r3, r3
 739              	.LVL97:
 740              	.L58:
 212:Lib/bq27421/bq27421.c ****     {
 741              		.loc 1 212 0 is_stmt 0 discriminator 1
 742 00bc 1F2B     		cmp	r3, #31
 743 00be F6D9     		bls	.L59
 744              	.LBE2:
 215:Lib/bq27421/bq27421.c ****     }
 216:Lib/bq27421/bq27421.c **** 
 217:Lib/bq27421/bq27421.c ****     bq27421_i2c_read_data_block( 0x00, block, 32 );
 745              		.loc 1 217 0 is_stmt 1
 746 00c0 2022     		movs	r2, #32
 747 00c2 6946     		mov	r1, sp
 748 00c4 0020     		movs	r0, #0
 749 00c6 FFF7FEFF 		bl	bq27421_i2c_read_data_block
 750              	.LVL98:
 751              	.LBB3:
 218:Lib/bq27421/bq27421.c **** 
 219:Lib/bq27421/bq27421.c ****     // Calculate checksum
 220:Lib/bq27421/bq27421.c ****     uint8_t checksumCalc = 0x00;
 221:Lib/bq27421/bq27421.c **** 
 222:Lib/bq27421/bq27421.c ****     for(uint8_t i = 0; i < 32; i++ )
 752              		.loc 1 222 0
 753 00ca 0023     		movs	r3, #0
 754 00cc 01E0     		b	.L60
 755              	.LVL99:
 756              	.L61:
 757              		.loc 1 222 0 is_stmt 0 discriminator 3
 758 00ce 0133     		adds	r3, r3, #1
 759              	.LVL100:
 760 00d0 DBB2     		uxtb	r3, r3
 761              	.LVL101:
 762              	.L60:
 763              		.loc 1 222 0 discriminator 1
 764 00d2 1F2B     		cmp	r3, #31
 765 00d4 FBD9     		bls	.L61
 766              	.LBE3:
 223:Lib/bq27421/bq27421.c ****     {
 224:Lib/bq27421/bq27421.c ****         checksumCalc += block[i];
 225:Lib/bq27421/bq27421.c ****     }
 226:Lib/bq27421/bq27421.c ****     checksumCalc = 0xFF - checksumCalc;
 227:Lib/bq27421/bq27421.c **** 
 228:Lib/bq27421/bq27421.c ****     // Update design capacity
 229:Lib/bq27421/bq27421.c ****     block[10] = (uint8_t)( designCapacity_mAh >> 8 );
 767              		.loc 1 229 0 is_stmt 1
ARM GAS  C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s 			page 19


 768 00d6 3B0A     		lsrs	r3, r7, #8
 769              	.LVL102:
 770 00d8 8DF80A30 		strb	r3, [sp, #10]
 230:Lib/bq27421/bq27421.c ****     block[11] = (uint8_t)( designCapacity_mAh & 0x00FF );
 771              		.loc 1 230 0
 772 00dc 8DF80B70 		strb	r7, [sp, #11]
 231:Lib/bq27421/bq27421.c ****     // Update design energy
 232:Lib/bq27421/bq27421.c ****     block[12] = (uint8_t)( designEnergy_mWh >> 8 );
 773              		.loc 1 232 0
 774 00e0 330A     		lsrs	r3, r6, #8
 775 00e2 8DF80C30 		strb	r3, [sp, #12]
 233:Lib/bq27421/bq27421.c ****     block[13] = (uint8_t)( designEnergy_mWh & 0x00FF );
 776              		.loc 1 233 0
 777 00e6 8DF80D60 		strb	r6, [sp, #13]
 234:Lib/bq27421/bq27421.c ****     // Update terminate voltage
 235:Lib/bq27421/bq27421.c ****     block[16] = (uint8_t)( terminateVoltage_mV >> 8 );
 778              		.loc 1 235 0
 779 00ea 2B0A     		lsrs	r3, r5, #8
 780 00ec 8DF81030 		strb	r3, [sp, #16]
 236:Lib/bq27421/bq27421.c ****     block[17] = (uint8_t)( terminateVoltage_mV & 0x00FF );
 781              		.loc 1 236 0
 782 00f0 8DF81150 		strb	r5, [sp, #17]
 237:Lib/bq27421/bq27421.c ****     // Update taper rate
 238:Lib/bq27421/bq27421.c ****     block[27] = (uint8_t)( taperRate >> 8 );
 783              		.loc 1 238 0
 784 00f4 230A     		lsrs	r3, r4, #8
 785 00f6 8DF81B30 		strb	r3, [sp, #27]
 239:Lib/bq27421/bq27421.c ****     block[28] = (uint8_t)( taperRate & 0x00FF );
 786              		.loc 1 239 0
 787 00fa 8DF81C40 		strb	r4, [sp, #28]
 788              	.LVL103:
 789              	.LBB4:
 240:Lib/bq27421/bq27421.c **** 
 241:Lib/bq27421/bq27421.c ****     // Calculate new checksum
 242:Lib/bq27421/bq27421.c ****     checksumNew = 0x00;
 243:Lib/bq27421/bq27421.c ****     for(int i = 0; i < 32; i++ )
 790              		.loc 1 243 0
 791 00fe 0022     		movs	r2, #0
 792              	.LBE4:
 242:Lib/bq27421/bq27421.c ****     for(int i = 0; i < 32; i++ )
 793              		.loc 1 242 0
 794 0100 1346     		mov	r3, r2
 795              	.LBB5:
 796              		.loc 1 243 0
 797 0102 06E0     		b	.L62
 798              	.LVL104:
 799              	.L63:
 244:Lib/bq27421/bq27421.c ****     {
 245:Lib/bq27421/bq27421.c ****         checksumNew += block[i];
 800              		.loc 1 245 0 discriminator 3
 801 0104 0AA9     		add	r1, sp, #40
 802 0106 1144     		add	r1, r1, r2
 803 0108 11F8281C 		ldrb	r1, [r1, #-40]	@ zero_extendqisi2
 804 010c 0B44     		add	r3, r3, r1
 805              	.LVL105:
 806 010e DBB2     		uxtb	r3, r3
 807              	.LVL106:
ARM GAS  C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s 			page 20


 243:Lib/bq27421/bq27421.c ****     {
 808              		.loc 1 243 0 discriminator 3
 809 0110 0132     		adds	r2, r2, #1
 810              	.LVL107:
 811              	.L62:
 243:Lib/bq27421/bq27421.c ****     {
 812              		.loc 1 243 0 is_stmt 0 discriminator 1
 813 0112 1F2A     		cmp	r2, #31
 814 0114 F6DD     		ble	.L63
 815              	.LBE5:
 246:Lib/bq27421/bq27421.c ****     }
 247:Lib/bq27421/bq27421.c ****     checksumNew = 0xFF - checksumNew;
 816              		.loc 1 247 0 is_stmt 1
 817 0116 DC43     		mvns	r4, r3
 818              	.LVL108:
 819 0118 E4B2     		uxtb	r4, r4
 820              	.LVL109:
 248:Lib/bq27421/bq27421.c **** 
 249:Lib/bq27421/bq27421.c ****     // Enable Block Data Memory Control
 250:Lib/bq27421/bq27421.c ****     bq27421_i2c_command_write( BQ27421_BLOCK_DATA_CONTROL, 0x0000 );
 821              		.loc 1 250 0
 822 011a 0021     		movs	r1, #0
 823 011c 6120     		movs	r0, #97
 824 011e FFF7FEFF 		bl	bq27421_i2c_command_write
 825              	.LVL110:
 251:Lib/bq27421/bq27421.c **** 
 252:Lib/bq27421/bq27421.c ****     HAL_Delay( BQ27421_DELAY );
 826              		.loc 1 252 0
 827 0122 0120     		movs	r0, #1
 828 0124 FFF7FEFF 		bl	HAL_Delay
 829              	.LVL111:
 253:Lib/bq27421/bq27421.c ****     
 254:Lib/bq27421/bq27421.c ****     // Access State subclass
 255:Lib/bq27421/bq27421.c ****     bq27421_i2c_command_write( BQ27421_DATA_CLASS, 0x0052 );
 830              		.loc 1 255 0
 831 0128 5221     		movs	r1, #82
 832 012a 3E20     		movs	r0, #62
 833 012c FFF7FEFF 		bl	bq27421_i2c_command_write
 834              	.LVL112:
 256:Lib/bq27421/bq27421.c **** 
 257:Lib/bq27421/bq27421.c ****     // Write the block offset
 258:Lib/bq27421/bq27421.c ****     bq27421_i2c_command_write( BQ27421_DATA_BLOCK, 0x0000 );
 835              		.loc 1 258 0
 836 0130 0021     		movs	r1, #0
 837 0132 3F20     		movs	r0, #63
 838 0134 FFF7FEFF 		bl	bq27421_i2c_command_write
 839              	.LVL113:
 259:Lib/bq27421/bq27421.c **** 
 260:Lib/bq27421/bq27421.c ****     // Write 32-byte block of updated data
 261:Lib/bq27421/bq27421.c ****     bq27421_i2c_write_data_block( 0x00, block, 32 );
 840              		.loc 1 261 0
 841 0138 2022     		movs	r2, #32
 842 013a 6946     		mov	r1, sp
 843 013c 0020     		movs	r0, #0
 844 013e FFF7FEFF 		bl	bq27421_i2c_write_data_block
 845              	.LVL114:
 262:Lib/bq27421/bq27421.c **** 
ARM GAS  C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s 			page 21


 263:Lib/bq27421/bq27421.c ****     // Write new checksum
 264:Lib/bq27421/bq27421.c ****     bq27421_i2c_command_write( BQ27421_BLOCK_DATA_CHECKSUM, checksumNew );
 846              		.loc 1 264 0
 847 0142 A4B2     		uxth	r4, r4
 848              	.LVL115:
 849 0144 2146     		mov	r1, r4
 850 0146 6020     		movs	r0, #96
 851 0148 FFF7FEFF 		bl	bq27421_i2c_command_write
 852              	.LVL116:
 265:Lib/bq27421/bq27421.c **** 
 266:Lib/bq27421/bq27421.c ****     // Access State subclass
 267:Lib/bq27421/bq27421.c ****     bq27421_i2c_command_write( BQ27421_DATA_CLASS, 0x0052 );
 853              		.loc 1 267 0
 854 014c 5221     		movs	r1, #82
 855 014e 3E20     		movs	r0, #62
 856 0150 FFF7FEFF 		bl	bq27421_i2c_command_write
 857              	.LVL117:
 268:Lib/bq27421/bq27421.c **** 
 269:Lib/bq27421/bq27421.c ****     // Write the block offset
 270:Lib/bq27421/bq27421.c ****     bq27421_i2c_command_write( BQ27421_DATA_BLOCK, 0x0000 );
 858              		.loc 1 270 0
 859 0154 0021     		movs	r1, #0
 860 0156 3F20     		movs	r0, #63
 861 0158 FFF7FEFF 		bl	bq27421_i2c_command_write
 862              	.LVL118:
 271:Lib/bq27421/bq27421.c **** 
 272:Lib/bq27421/bq27421.c ****     // Read block checksum
 273:Lib/bq27421/bq27421.c ****     bq27421_i2c_command_read( BQ27421_BLOCK_DATA_CHECKSUM, &checksumRead );
 863              		.loc 1 273 0
 864 015c 0DF12201 		add	r1, sp, #34
 865 0160 6020     		movs	r0, #96
 866 0162 FFF7FEFF 		bl	bq27421_i2c_command_read
 867              	.LVL119:
 274:Lib/bq27421/bq27421.c **** 
 275:Lib/bq27421/bq27421.c ****     // Verify
 276:Lib/bq27421/bq27421.c ****     if( checksumRead != (uint8_t)checksumNew )
 868              		.loc 1 276 0
 869 0166 BDF82230 		ldrh	r3, [sp, #34]
 870 016a 9C42     		cmp	r4, r3
 871 016c 03D0     		beq	.L77
 277:Lib/bq27421/bq27421.c ****     {
 278:Lib/bq27421/bq27421.c ****         return false;
 872              		.loc 1 278 0
 873 016e 0020     		movs	r0, #0
 874              	.L64:
 279:Lib/bq27421/bq27421.c ****     }
 280:Lib/bq27421/bq27421.c **** 
 281:Lib/bq27421/bq27421.c ****     // Enable Block Data Memory Control
 282:Lib/bq27421/bq27421.c ****     bq27421_i2c_command_write( BQ27421_BLOCK_DATA_CONTROL, 0x0000 );
 283:Lib/bq27421/bq27421.c **** 
 284:Lib/bq27421/bq27421.c ****     HAL_Delay( BQ27421_DELAY );
 285:Lib/bq27421/bq27421.c ****     
 286:Lib/bq27421/bq27421.c ****     // Access Registers subclass
 287:Lib/bq27421/bq27421.c ****     bq27421_i2c_command_write( BQ27421_DATA_CLASS, 0x0040 );
 288:Lib/bq27421/bq27421.c **** 
 289:Lib/bq27421/bq27421.c ****     // Write the block offset
 290:Lib/bq27421/bq27421.c ****     bq27421_i2c_command_write( BQ27421_DATA_BLOCK, 0x0000 );
ARM GAS  C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s 			page 22


 291:Lib/bq27421/bq27421.c **** 
 292:Lib/bq27421/bq27421.c ****     // Read block checksum
 293:Lib/bq27421/bq27421.c ****     bq27421_i2c_command_read( BQ27421_BLOCK_DATA_CHECKSUM, &checksumOld );
 294:Lib/bq27421/bq27421.c **** 
 295:Lib/bq27421/bq27421.c ****     // Read 32-byte block of data
 296:Lib/bq27421/bq27421.c ****     for(uint8_t i = 0; i < 32; i++ )
 297:Lib/bq27421/bq27421.c ****     {
 298:Lib/bq27421/bq27421.c ****         block[i] = 0x00;
 299:Lib/bq27421/bq27421.c ****     }
 300:Lib/bq27421/bq27421.c **** 
 301:Lib/bq27421/bq27421.c ****     bq27421_i2c_read_data_block( 0x00, block, 32 );
 302:Lib/bq27421/bq27421.c **** 
 303:Lib/bq27421/bq27421.c ****     // Calculate checksum
 304:Lib/bq27421/bq27421.c ****     checksumCalc = 0x00;
 305:Lib/bq27421/bq27421.c **** 
 306:Lib/bq27421/bq27421.c ****     for(uint8_t i = 0; i < 32; i++ )
 307:Lib/bq27421/bq27421.c ****     {
 308:Lib/bq27421/bq27421.c ****         checksumCalc += block[i];
 309:Lib/bq27421/bq27421.c ****     }
 310:Lib/bq27421/bq27421.c ****     checksumCalc = 0xFF - checksumCalc;
 311:Lib/bq27421/bq27421.c **** 
 312:Lib/bq27421/bq27421.c ****     // Update OpConfig
 313:Lib/bq27421/bq27421.c ****     block[0] = 0x05;
 314:Lib/bq27421/bq27421.c **** 
 315:Lib/bq27421/bq27421.c ****     // Calculate new checksum
 316:Lib/bq27421/bq27421.c ****     checksumNew = 0x00;
 317:Lib/bq27421/bq27421.c ****     for(int i = 0; i < 32; i++ )
 318:Lib/bq27421/bq27421.c ****     {
 319:Lib/bq27421/bq27421.c ****         checksumNew += block[i];
 320:Lib/bq27421/bq27421.c ****     }
 321:Lib/bq27421/bq27421.c ****     checksumNew = 0xFF - checksumNew;
 322:Lib/bq27421/bq27421.c **** 
 323:Lib/bq27421/bq27421.c ****     // Enable Block Data Memory Control
 324:Lib/bq27421/bq27421.c ****     bq27421_i2c_command_write( BQ27421_BLOCK_DATA_CONTROL, 0x0000 );
 325:Lib/bq27421/bq27421.c **** 
 326:Lib/bq27421/bq27421.c ****     HAL_Delay( BQ27421_DELAY );
 327:Lib/bq27421/bq27421.c ****     
 328:Lib/bq27421/bq27421.c ****     // Access Registers subclass
 329:Lib/bq27421/bq27421.c ****     bq27421_i2c_command_write( BQ27421_DATA_CLASS, 0x0040 );
 330:Lib/bq27421/bq27421.c **** 
 331:Lib/bq27421/bq27421.c ****     // Write the block offset
 332:Lib/bq27421/bq27421.c ****     bq27421_i2c_command_write( BQ27421_DATA_BLOCK, 0x0000 );
 333:Lib/bq27421/bq27421.c **** 
 334:Lib/bq27421/bq27421.c ****     // Write 32-byte block of updated data
 335:Lib/bq27421/bq27421.c ****     bq27421_i2c_write_data_block( 0x00, block, 32 );
 336:Lib/bq27421/bq27421.c **** 
 337:Lib/bq27421/bq27421.c ****     // Write new checksum
 338:Lib/bq27421/bq27421.c ****     bq27421_i2c_command_write( BQ27421_BLOCK_DATA_CHECKSUM, checksumNew );
 339:Lib/bq27421/bq27421.c **** 
 340:Lib/bq27421/bq27421.c ****     // Access Registers subclass
 341:Lib/bq27421/bq27421.c ****     bq27421_i2c_command_write( BQ27421_DATA_CLASS, 0x0040 );
 342:Lib/bq27421/bq27421.c **** 
 343:Lib/bq27421/bq27421.c ****     // Write the block offset
 344:Lib/bq27421/bq27421.c ****     bq27421_i2c_command_write( BQ27421_DATA_BLOCK, 0x0000 );
 345:Lib/bq27421/bq27421.c **** 
 346:Lib/bq27421/bq27421.c ****     // Read block checksum
 347:Lib/bq27421/bq27421.c ****     bq27421_i2c_command_read( BQ27421_BLOCK_DATA_CHECKSUM, &checksumRead );
ARM GAS  C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s 			page 23


 348:Lib/bq27421/bq27421.c **** 
 349:Lib/bq27421/bq27421.c ****     // Verify
 350:Lib/bq27421/bq27421.c ****     if( checksumRead != (uint8_t)checksumNew )
 351:Lib/bq27421/bq27421.c ****     {
 352:Lib/bq27421/bq27421.c ****         return false;
 353:Lib/bq27421/bq27421.c ****     }
 354:Lib/bq27421/bq27421.c **** 
 355:Lib/bq27421/bq27421.c ****     // Configure BAT_DET
 356:Lib/bq27421/bq27421.c ****     bq27421_i2c_control_write( BQ27421_CONTROL_BAT_INSERT );
 357:Lib/bq27421/bq27421.c **** 
 358:Lib/bq27421/bq27421.c ****     // Send Soft Reset
 359:Lib/bq27421/bq27421.c ****     bq27421_i2c_control_write( BQ27421_CONTROL_SOFT_RESET );
 360:Lib/bq27421/bq27421.c **** 
 361:Lib/bq27421/bq27421.c ****     // Poll flags
 362:Lib/bq27421/bq27421.c ****     do
 363:Lib/bq27421/bq27421.c ****     {
 364:Lib/bq27421/bq27421.c ****         bq27421_i2c_command_read( BQ27421_FLAGS_LOW, &flags );
 365:Lib/bq27421/bq27421.c ****         if( !(flags & 0x0010) )
 366:Lib/bq27421/bq27421.c ****         {
 367:Lib/bq27421/bq27421.c ****             HAL_Delay( 50 );
 368:Lib/bq27421/bq27421.c ****         }
 369:Lib/bq27421/bq27421.c ****     }
 370:Lib/bq27421/bq27421.c ****     while( (flags & 0x0010) );
 371:Lib/bq27421/bq27421.c **** 
 372:Lib/bq27421/bq27421.c ****     // Seal gauge
 373:Lib/bq27421/bq27421.c ****     bq27421_i2c_control_write( BQ27421_CONTROL_SEALED );
 374:Lib/bq27421/bq27421.c **** 
 375:Lib/bq27421/bq27421.c ****     return true;
 376:Lib/bq27421/bq27421.c **** }
 875              		.loc 1 376 0
 876 0170 0BB0     		add	sp, sp, #44
 877              	.LCFI26:
 878              		.cfi_remember_state
 879              		.cfi_def_cfa_offset 28
 880              		@ sp needed
 881 0172 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 882              	.LVL120:
 883              	.L77:
 884              	.LCFI27:
 885              		.cfi_restore_state
 282:Lib/bq27421/bq27421.c **** 
 886              		.loc 1 282 0
 887 0176 0021     		movs	r1, #0
 888 0178 6120     		movs	r0, #97
 889 017a FFF7FEFF 		bl	bq27421_i2c_command_write
 890              	.LVL121:
 284:Lib/bq27421/bq27421.c ****     
 891              		.loc 1 284 0
 892 017e 0120     		movs	r0, #1
 893 0180 FFF7FEFF 		bl	HAL_Delay
 894              	.LVL122:
 287:Lib/bq27421/bq27421.c **** 
 895              		.loc 1 287 0
 896 0184 4021     		movs	r1, #64
 897 0186 3E20     		movs	r0, #62
 898 0188 FFF7FEFF 		bl	bq27421_i2c_command_write
 899              	.LVL123:
ARM GAS  C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s 			page 24


 290:Lib/bq27421/bq27421.c **** 
 900              		.loc 1 290 0
 901 018c 0021     		movs	r1, #0
 902 018e 3F20     		movs	r0, #63
 903 0190 FFF7FEFF 		bl	bq27421_i2c_command_write
 904              	.LVL124:
 293:Lib/bq27421/bq27421.c **** 
 905              		.loc 1 293 0
 906 0194 09A9     		add	r1, sp, #36
 907 0196 6020     		movs	r0, #96
 908 0198 FFF7FEFF 		bl	bq27421_i2c_command_read
 909              	.LVL125:
 910              	.LBB6:
 296:Lib/bq27421/bq27421.c ****     {
 911              		.loc 1 296 0
 912 019c 0023     		movs	r3, #0
 913 019e 06E0     		b	.L65
 914              	.LVL126:
 915              	.L66:
 298:Lib/bq27421/bq27421.c ****     }
 916              		.loc 1 298 0 discriminator 3
 917 01a0 0AAA     		add	r2, sp, #40
 918 01a2 1A44     		add	r2, r2, r3
 919 01a4 0021     		movs	r1, #0
 920 01a6 02F8281C 		strb	r1, [r2, #-40]
 296:Lib/bq27421/bq27421.c ****     {
 921              		.loc 1 296 0 discriminator 3
 922 01aa 0133     		adds	r3, r3, #1
 923              	.LVL127:
 924 01ac DBB2     		uxtb	r3, r3
 925              	.LVL128:
 926              	.L65:
 296:Lib/bq27421/bq27421.c ****     {
 927              		.loc 1 296 0 is_stmt 0 discriminator 1
 928 01ae 1F2B     		cmp	r3, #31
 929 01b0 F6D9     		bls	.L66
 930              	.LBE6:
 301:Lib/bq27421/bq27421.c **** 
 931              		.loc 1 301 0 is_stmt 1
 932 01b2 2022     		movs	r2, #32
 933 01b4 6946     		mov	r1, sp
 934 01b6 0020     		movs	r0, #0
 935 01b8 FFF7FEFF 		bl	bq27421_i2c_read_data_block
 936              	.LVL129:
 937              	.LBB7:
 306:Lib/bq27421/bq27421.c ****     {
 938              		.loc 1 306 0
 939 01bc 0023     		movs	r3, #0
 940 01be 01E0     		b	.L67
 941              	.LVL130:
 942              	.L68:
 306:Lib/bq27421/bq27421.c ****     {
 943              		.loc 1 306 0 is_stmt 0 discriminator 3
 944 01c0 0133     		adds	r3, r3, #1
 945              	.LVL131:
 946 01c2 DBB2     		uxtb	r3, r3
 947              	.LVL132:
ARM GAS  C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s 			page 25


 948              	.L67:
 306:Lib/bq27421/bq27421.c ****     {
 949              		.loc 1 306 0 discriminator 1
 950 01c4 1F2B     		cmp	r3, #31
 951 01c6 FBD9     		bls	.L68
 952              	.LBE7:
 313:Lib/bq27421/bq27421.c **** 
 953              		.loc 1 313 0 is_stmt 1
 954 01c8 0523     		movs	r3, #5
 955              	.LVL133:
 956 01ca 8DF80030 		strb	r3, [sp]
 957              	.LVL134:
 958              	.LBB8:
 317:Lib/bq27421/bq27421.c ****     {
 959              		.loc 1 317 0
 960 01ce 0022     		movs	r2, #0
 961              	.LBE8:
 316:Lib/bq27421/bq27421.c ****     for(int i = 0; i < 32; i++ )
 962              		.loc 1 316 0
 963 01d0 1346     		mov	r3, r2
 964              	.LBB9:
 317:Lib/bq27421/bq27421.c ****     {
 965              		.loc 1 317 0
 966 01d2 06E0     		b	.L69
 967              	.LVL135:
 968              	.L70:
 319:Lib/bq27421/bq27421.c ****     }
 969              		.loc 1 319 0 discriminator 3
 970 01d4 0AA9     		add	r1, sp, #40
 971 01d6 1144     		add	r1, r1, r2
 972 01d8 11F8281C 		ldrb	r1, [r1, #-40]	@ zero_extendqisi2
 973 01dc 0B44     		add	r3, r3, r1
 974              	.LVL136:
 975 01de DBB2     		uxtb	r3, r3
 976              	.LVL137:
 317:Lib/bq27421/bq27421.c ****     {
 977              		.loc 1 317 0 discriminator 3
 978 01e0 0132     		adds	r2, r2, #1
 979              	.LVL138:
 980              	.L69:
 317:Lib/bq27421/bq27421.c ****     {
 981              		.loc 1 317 0 is_stmt 0 discriminator 1
 982 01e2 1F2A     		cmp	r2, #31
 983 01e4 F6DD     		ble	.L70
 984              	.LBE9:
 321:Lib/bq27421/bq27421.c **** 
 985              		.loc 1 321 0 is_stmt 1
 986 01e6 DC43     		mvns	r4, r3
 987 01e8 E4B2     		uxtb	r4, r4
 988              	.LVL139:
 324:Lib/bq27421/bq27421.c **** 
 989              		.loc 1 324 0
 990 01ea 0021     		movs	r1, #0
 991 01ec 6120     		movs	r0, #97
 992 01ee FFF7FEFF 		bl	bq27421_i2c_command_write
 993              	.LVL140:
 326:Lib/bq27421/bq27421.c ****     
ARM GAS  C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s 			page 26


 994              		.loc 1 326 0
 995 01f2 0120     		movs	r0, #1
 996 01f4 FFF7FEFF 		bl	HAL_Delay
 997              	.LVL141:
 329:Lib/bq27421/bq27421.c **** 
 998              		.loc 1 329 0
 999 01f8 4021     		movs	r1, #64
 1000 01fa 3E20     		movs	r0, #62
 1001 01fc FFF7FEFF 		bl	bq27421_i2c_command_write
 1002              	.LVL142:
 332:Lib/bq27421/bq27421.c **** 
 1003              		.loc 1 332 0
 1004 0200 0021     		movs	r1, #0
 1005 0202 3F20     		movs	r0, #63
 1006 0204 FFF7FEFF 		bl	bq27421_i2c_command_write
 1007              	.LVL143:
 335:Lib/bq27421/bq27421.c **** 
 1008              		.loc 1 335 0
 1009 0208 2022     		movs	r2, #32
 1010 020a 6946     		mov	r1, sp
 1011 020c 0020     		movs	r0, #0
 1012 020e FFF7FEFF 		bl	bq27421_i2c_write_data_block
 1013              	.LVL144:
 338:Lib/bq27421/bq27421.c **** 
 1014              		.loc 1 338 0
 1015 0212 A4B2     		uxth	r4, r4
 1016              	.LVL145:
 1017 0214 2146     		mov	r1, r4
 1018 0216 6020     		movs	r0, #96
 1019 0218 FFF7FEFF 		bl	bq27421_i2c_command_write
 1020              	.LVL146:
 341:Lib/bq27421/bq27421.c **** 
 1021              		.loc 1 341 0
 1022 021c 4021     		movs	r1, #64
 1023 021e 3E20     		movs	r0, #62
 1024 0220 FFF7FEFF 		bl	bq27421_i2c_command_write
 1025              	.LVL147:
 344:Lib/bq27421/bq27421.c **** 
 1026              		.loc 1 344 0
 1027 0224 0021     		movs	r1, #0
 1028 0226 3F20     		movs	r0, #63
 1029 0228 FFF7FEFF 		bl	bq27421_i2c_command_write
 1030              	.LVL148:
 347:Lib/bq27421/bq27421.c **** 
 1031              		.loc 1 347 0
 1032 022c 0DF12201 		add	r1, sp, #34
 1033 0230 6020     		movs	r0, #96
 1034 0232 FFF7FEFF 		bl	bq27421_i2c_command_read
 1035              	.LVL149:
 350:Lib/bq27421/bq27421.c ****     {
 1036              		.loc 1 350 0
 1037 0236 BDF82230 		ldrh	r3, [sp, #34]
 1038 023a 9C42     		cmp	r4, r3
 1039 023c 01D0     		beq	.L78
 352:Lib/bq27421/bq27421.c ****     }
 1040              		.loc 1 352 0
 1041 023e 0020     		movs	r0, #0
ARM GAS  C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s 			page 27


 1042 0240 96E7     		b	.L64
 1043              	.L78:
 356:Lib/bq27421/bq27421.c **** 
 1044              		.loc 1 356 0
 1045 0242 0C20     		movs	r0, #12
 1046 0244 FFF7FEFF 		bl	bq27421_i2c_control_write
 1047              	.LVL150:
 359:Lib/bq27421/bq27421.c **** 
 1048              		.loc 1 359 0
 1049 0248 4220     		movs	r0, #66
 1050 024a FFF7FEFF 		bl	bq27421_i2c_control_write
 1051              	.LVL151:
 1052 024e 04E0     		b	.L72
 1053              	.L71:
 370:Lib/bq27421/bq27421.c **** 
 1054              		.loc 1 370 0
 1055 0250 BDF82630 		ldrh	r3, [sp, #38]
 1056 0254 13F0100F 		tst	r3, #16
 1057 0258 0DD0     		beq	.L79
 1058              	.L72:
 364:Lib/bq27421/bq27421.c ****         if( !(flags & 0x0010) )
 1059              		.loc 1 364 0
 1060 025a 0DF12601 		add	r1, sp, #38
 1061 025e 0620     		movs	r0, #6
 1062 0260 FFF7FEFF 		bl	bq27421_i2c_command_read
 1063              	.LVL152:
 365:Lib/bq27421/bq27421.c ****         {
 1064              		.loc 1 365 0
 1065 0264 BDF82630 		ldrh	r3, [sp, #38]
 1066 0268 13F0100F 		tst	r3, #16
 1067 026c F0D1     		bne	.L71
 367:Lib/bq27421/bq27421.c ****         }
 1068              		.loc 1 367 0
 1069 026e 3220     		movs	r0, #50
 1070 0270 FFF7FEFF 		bl	HAL_Delay
 1071              	.LVL153:
 1072 0274 ECE7     		b	.L71
 1073              	.L79:
 373:Lib/bq27421/bq27421.c **** 
 1074              		.loc 1 373 0
 1075 0276 2020     		movs	r0, #32
 1076 0278 FFF7FEFF 		bl	bq27421_i2c_control_write
 1077              	.LVL154:
 375:Lib/bq27421/bq27421.c **** }
 1078              		.loc 1 375 0
 1079 027c 0120     		movs	r0, #1
 1080 027e 77E7     		b	.L64
 1081              	.L81:
 1082              		.align	3
 1083              	.L80:
 1084 0280 9A999999 		.word	-1717986918
 1085 0284 99990D40 		.word	1074633113
 1086 0288 9A999999 		.word	-1717986918
 1087 028c 9999B93F 		.word	1069128089
 1088              		.cfi_endproc
 1089              	.LFE130:
 1091              		.section	.text.bq27421_readDeviceType,"ax",%progbits
ARM GAS  C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s 			page 28


 1092              		.align	1
 1093              		.global	bq27421_readDeviceType
 1094              		.syntax unified
 1095              		.thumb
 1096              		.thumb_func
 1097              		.fpu fpv4-sp-d16
 1099              	bq27421_readDeviceType:
 1100              	.LFB132:
 377:Lib/bq27421/bq27421.c **** 
 378:Lib/bq27421/bq27421.c **** bool bq27421_update( bq27421_info *battery )
 379:Lib/bq27421/bq27421.c **** {
 380:Lib/bq27421/bq27421.c ****     uint16_t temp;
 381:Lib/bq27421/bq27421.c **** 
 382:Lib/bq27421/bq27421.c ****     if( !bq27421_readVoltage_mV( &(battery->voltage_mV) ) )
 383:Lib/bq27421/bq27421.c ****     {
 384:Lib/bq27421/bq27421.c ****         return false;
 385:Lib/bq27421/bq27421.c ****     }
 386:Lib/bq27421/bq27421.c ****     if( !bq27421_readAvgCurrent_mA( &(battery->current_mA) ) )
 387:Lib/bq27421/bq27421.c ****     {
 388:Lib/bq27421/bq27421.c ****         return false;
 389:Lib/bq27421/bq27421.c ****     }
 390:Lib/bq27421/bq27421.c ****     if( !bq27421_readTemp_degK( &temp ) )
 391:Lib/bq27421/bq27421.c ****     {
 392:Lib/bq27421/bq27421.c ****         return false;
 393:Lib/bq27421/bq27421.c ****     }
 394:Lib/bq27421/bq27421.c ****     battery->temp_degC = ( (double)temp / 10 ) - 273.15;
 395:Lib/bq27421/bq27421.c **** 
 396:Lib/bq27421/bq27421.c ****     if( !bq27421_readStateofCharge_percent( &(battery->soc_percent) ) )
 397:Lib/bq27421/bq27421.c ****     {
 398:Lib/bq27421/bq27421.c ****         return false;
 399:Lib/bq27421/bq27421.c ****     }
 400:Lib/bq27421/bq27421.c ****     if( !bq27421_readStateofHealth_percent( &(battery->soh_percent) ) )
 401:Lib/bq27421/bq27421.c ****     {
 402:Lib/bq27421/bq27421.c ****         return false;
 403:Lib/bq27421/bq27421.c ****     }
 404:Lib/bq27421/bq27421.c ****     if( !bq27421_readDesignCapacity_mAh( &(battery->designCapacity_mAh) ) )
 405:Lib/bq27421/bq27421.c ****     {
 406:Lib/bq27421/bq27421.c ****         return false;
 407:Lib/bq27421/bq27421.c ****     }
 408:Lib/bq27421/bq27421.c ****     if( !bq27421_readRemainingCapacity_mAh( &(battery->remainingCapacity_mAh) ) )
 409:Lib/bq27421/bq27421.c ****     {
 410:Lib/bq27421/bq27421.c ****         return false;
 411:Lib/bq27421/bq27421.c ****     }
 412:Lib/bq27421/bq27421.c ****     if( !bq27421_readFullChargeCapacity_mAh( &(battery->fullChargeCapacity_mAh) ) )
 413:Lib/bq27421/bq27421.c ****     {
 414:Lib/bq27421/bq27421.c ****         return false;
 415:Lib/bq27421/bq27421.c ****     }
 416:Lib/bq27421/bq27421.c ****     if( !bq27421_readFlagsReg( &temp ) )
 417:Lib/bq27421/bq27421.c ****     {
 418:Lib/bq27421/bq27421.c ****         return false;
 419:Lib/bq27421/bq27421.c ****     }
 420:Lib/bq27421/bq27421.c ****     battery->isCritical = temp & 0x0002;
 421:Lib/bq27421/bq27421.c ****     battery->isLow = temp & 0x0004;
 422:Lib/bq27421/bq27421.c ****     battery->isFull = temp & 0x0200;
 423:Lib/bq27421/bq27421.c ****     if( battery->current_mA <= 0 )
 424:Lib/bq27421/bq27421.c ****     {
 425:Lib/bq27421/bq27421.c ****         battery->isDischarging = 1;
ARM GAS  C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s 			page 29


 426:Lib/bq27421/bq27421.c ****         battery->isCharging = 0;
 427:Lib/bq27421/bq27421.c ****     }
 428:Lib/bq27421/bq27421.c ****     else
 429:Lib/bq27421/bq27421.c ****     {
 430:Lib/bq27421/bq27421.c ****         battery->isDischarging = 0;
 431:Lib/bq27421/bq27421.c ****         battery->isCharging = 1;
 432:Lib/bq27421/bq27421.c ****     }
 433:Lib/bq27421/bq27421.c **** 
 434:Lib/bq27421/bq27421.c ****     return true;
 435:Lib/bq27421/bq27421.c **** }
 436:Lib/bq27421/bq27421.c **** 
 437:Lib/bq27421/bq27421.c **** bool bq27421_readDeviceType( uint16_t *deviceType )
 438:Lib/bq27421/bq27421.c **** {
 1101              		.loc 1 438 0
 1102              		.cfi_startproc
 1103              		@ args = 0, pretend = 0, frame = 0
 1104              		@ frame_needed = 0, uses_anonymous_args = 0
 1105              	.LVL155:
 1106 0000 10B5     		push	{r4, lr}
 1107              	.LCFI28:
 1108              		.cfi_def_cfa_offset 8
 1109              		.cfi_offset 4, -8
 1110              		.cfi_offset 14, -4
 1111 0002 0446     		mov	r4, r0
 439:Lib/bq27421/bq27421.c ****     if( !bq27421_i2c_control_write( BQ27421_CONTROL_DEVICE_TYPE ) )
 1112              		.loc 1 439 0
 1113 0004 0120     		movs	r0, #1
 1114              	.LVL156:
 1115 0006 FFF7FEFF 		bl	bq27421_i2c_control_write
 1116              	.LVL157:
 1117 000a 0346     		mov	r3, r0
 1118 000c 08B9     		cbnz	r0, .L85
 1119              	.L83:
 440:Lib/bq27421/bq27421.c ****     {
 441:Lib/bq27421/bq27421.c ****         return false;
 442:Lib/bq27421/bq27421.c ****     }
 443:Lib/bq27421/bq27421.c ****     if( !bq27421_i2c_command_read( BQ27421_CONTROL_LOW, deviceType ) )
 444:Lib/bq27421/bq27421.c ****     {
 445:Lib/bq27421/bq27421.c ****         return false;
 446:Lib/bq27421/bq27421.c ****     }
 447:Lib/bq27421/bq27421.c **** 
 448:Lib/bq27421/bq27421.c ****     return true;
 449:Lib/bq27421/bq27421.c **** }
 1120              		.loc 1 449 0
 1121 000e 1846     		mov	r0, r3
 1122 0010 10BD     		pop	{r4, pc}
 1123              	.LVL158:
 1124              	.L85:
 443:Lib/bq27421/bq27421.c ****     {
 1125              		.loc 1 443 0
 1126 0012 2146     		mov	r1, r4
 1127 0014 0020     		movs	r0, #0
 1128 0016 FFF7FEFF 		bl	bq27421_i2c_command_read
 1129              	.LVL159:
 1130 001a 0346     		mov	r3, r0
 1131 001c F7E7     		b	.L83
 1132              		.cfi_endproc
ARM GAS  C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s 			page 30


 1133              	.LFE132:
 1135              		.section	.text.bq27421_readDeviceFWver,"ax",%progbits
 1136              		.align	1
 1137              		.global	bq27421_readDeviceFWver
 1138              		.syntax unified
 1139              		.thumb
 1140              		.thumb_func
 1141              		.fpu fpv4-sp-d16
 1143              	bq27421_readDeviceFWver:
 1144              	.LFB133:
 450:Lib/bq27421/bq27421.c **** 
 451:Lib/bq27421/bq27421.c **** bool bq27421_readDeviceFWver( uint16_t *deviceFWver )
 452:Lib/bq27421/bq27421.c **** {
 1145              		.loc 1 452 0
 1146              		.cfi_startproc
 1147              		@ args = 0, pretend = 0, frame = 0
 1148              		@ frame_needed = 0, uses_anonymous_args = 0
 1149              	.LVL160:
 1150 0000 10B5     		push	{r4, lr}
 1151              	.LCFI29:
 1152              		.cfi_def_cfa_offset 8
 1153              		.cfi_offset 4, -8
 1154              		.cfi_offset 14, -4
 1155 0002 0446     		mov	r4, r0
 453:Lib/bq27421/bq27421.c ****     if( !bq27421_i2c_control_write( BQ27421_CONTROL_FW_VERSION ) )
 1156              		.loc 1 453 0
 1157 0004 0220     		movs	r0, #2
 1158              	.LVL161:
 1159 0006 FFF7FEFF 		bl	bq27421_i2c_control_write
 1160              	.LVL162:
 1161 000a 0346     		mov	r3, r0
 1162 000c 08B9     		cbnz	r0, .L89
 1163              	.L87:
 454:Lib/bq27421/bq27421.c ****     {
 455:Lib/bq27421/bq27421.c ****         return false;
 456:Lib/bq27421/bq27421.c ****     }
 457:Lib/bq27421/bq27421.c ****     if( !bq27421_i2c_command_read( BQ27421_CONTROL_LOW, deviceFWver ) )
 458:Lib/bq27421/bq27421.c ****     {
 459:Lib/bq27421/bq27421.c ****         return false;
 460:Lib/bq27421/bq27421.c ****     }
 461:Lib/bq27421/bq27421.c **** 
 462:Lib/bq27421/bq27421.c ****     return true;
 463:Lib/bq27421/bq27421.c **** }
 1164              		.loc 1 463 0
 1165 000e 1846     		mov	r0, r3
 1166 0010 10BD     		pop	{r4, pc}
 1167              	.LVL163:
 1168              	.L89:
 457:Lib/bq27421/bq27421.c ****     {
 1169              		.loc 1 457 0
 1170 0012 2146     		mov	r1, r4
 1171 0014 0020     		movs	r0, #0
 1172 0016 FFF7FEFF 		bl	bq27421_i2c_command_read
 1173              	.LVL164:
 1174 001a 0346     		mov	r3, r0
 1175 001c F7E7     		b	.L87
 1176              		.cfi_endproc
ARM GAS  C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s 			page 31


 1177              	.LFE133:
 1179              		.section	.text.bq27421_readDesignCapacity_mAh,"ax",%progbits
 1180              		.align	1
 1181              		.global	bq27421_readDesignCapacity_mAh
 1182              		.syntax unified
 1183              		.thumb
 1184              		.thumb_func
 1185              		.fpu fpv4-sp-d16
 1187              	bq27421_readDesignCapacity_mAh:
 1188              	.LFB134:
 464:Lib/bq27421/bq27421.c **** 
 465:Lib/bq27421/bq27421.c **** bool bq27421_readDesignCapacity_mAh( uint16_t *capacity_mAh )
 466:Lib/bq27421/bq27421.c **** {
 1189              		.loc 1 466 0
 1190              		.cfi_startproc
 1191              		@ args = 0, pretend = 0, frame = 0
 1192              		@ frame_needed = 0, uses_anonymous_args = 0
 1193              	.LVL165:
 1194 0000 08B5     		push	{r3, lr}
 1195              	.LCFI30:
 1196              		.cfi_def_cfa_offset 8
 1197              		.cfi_offset 3, -8
 1198              		.cfi_offset 14, -4
 467:Lib/bq27421/bq27421.c ****     if( !bq27421_i2c_command_read( BQ27421_DESIGN_CAP_LOW, capacity_mAh ) )
 1199              		.loc 1 467 0
 1200 0002 0146     		mov	r1, r0
 1201 0004 3C20     		movs	r0, #60
 1202              	.LVL166:
 1203 0006 FFF7FEFF 		bl	bq27421_i2c_command_read
 1204              	.LVL167:
 468:Lib/bq27421/bq27421.c ****     {
 469:Lib/bq27421/bq27421.c ****         return false;
 470:Lib/bq27421/bq27421.c ****     }
 471:Lib/bq27421/bq27421.c **** 
 472:Lib/bq27421/bq27421.c ****     return true;
 473:Lib/bq27421/bq27421.c **** }
 1205              		.loc 1 473 0
 1206 000a 08BD     		pop	{r3, pc}
 1207              		.cfi_endproc
 1208              	.LFE134:
 1210              		.section	.text.bq27421_readVoltage_mV,"ax",%progbits
 1211              		.align	1
 1212              		.global	bq27421_readVoltage_mV
 1213              		.syntax unified
 1214              		.thumb
 1215              		.thumb_func
 1216              		.fpu fpv4-sp-d16
 1218              	bq27421_readVoltage_mV:
 1219              	.LFB135:
 474:Lib/bq27421/bq27421.c **** 
 475:Lib/bq27421/bq27421.c **** bool bq27421_readVoltage_mV( uint16_t *voltage_mV )
 476:Lib/bq27421/bq27421.c **** {
 1220              		.loc 1 476 0
 1221              		.cfi_startproc
 1222              		@ args = 0, pretend = 0, frame = 0
 1223              		@ frame_needed = 0, uses_anonymous_args = 0
 1224              	.LVL168:
ARM GAS  C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s 			page 32


 1225 0000 08B5     		push	{r3, lr}
 1226              	.LCFI31:
 1227              		.cfi_def_cfa_offset 8
 1228              		.cfi_offset 3, -8
 1229              		.cfi_offset 14, -4
 477:Lib/bq27421/bq27421.c ****     if( !bq27421_i2c_command_read( BQ27421_VOLTAGE_LOW, voltage_mV ) )
 1230              		.loc 1 477 0
 1231 0002 0146     		mov	r1, r0
 1232 0004 0420     		movs	r0, #4
 1233              	.LVL169:
 1234 0006 FFF7FEFF 		bl	bq27421_i2c_command_read
 1235              	.LVL170:
 478:Lib/bq27421/bq27421.c ****     {
 479:Lib/bq27421/bq27421.c ****         return false;
 480:Lib/bq27421/bq27421.c ****     }
 481:Lib/bq27421/bq27421.c **** 
 482:Lib/bq27421/bq27421.c ****     return true;
 483:Lib/bq27421/bq27421.c **** }
 1236              		.loc 1 483 0
 1237 000a 08BD     		pop	{r3, pc}
 1238              		.cfi_endproc
 1239              	.LFE135:
 1241              		.section	.text.bq27421_readTemp_degK,"ax",%progbits
 1242              		.align	1
 1243              		.global	bq27421_readTemp_degK
 1244              		.syntax unified
 1245              		.thumb
 1246              		.thumb_func
 1247              		.fpu fpv4-sp-d16
 1249              	bq27421_readTemp_degK:
 1250              	.LFB136:
 484:Lib/bq27421/bq27421.c **** 
 485:Lib/bq27421/bq27421.c **** bool bq27421_readTemp_degK( uint16_t *temp_degKbyTen )
 486:Lib/bq27421/bq27421.c **** {
 1251              		.loc 1 486 0
 1252              		.cfi_startproc
 1253              		@ args = 0, pretend = 0, frame = 0
 1254              		@ frame_needed = 0, uses_anonymous_args = 0
 1255              	.LVL171:
 1256 0000 08B5     		push	{r3, lr}
 1257              	.LCFI32:
 1258              		.cfi_def_cfa_offset 8
 1259              		.cfi_offset 3, -8
 1260              		.cfi_offset 14, -4
 487:Lib/bq27421/bq27421.c ****     if( !bq27421_i2c_command_read( BQ27421_TEMP_LOW, temp_degKbyTen ) )
 1261              		.loc 1 487 0
 1262 0002 0146     		mov	r1, r0
 1263 0004 0220     		movs	r0, #2
 1264              	.LVL172:
 1265 0006 FFF7FEFF 		bl	bq27421_i2c_command_read
 1266              	.LVL173:
 488:Lib/bq27421/bq27421.c ****     {
 489:Lib/bq27421/bq27421.c ****         return false;
 490:Lib/bq27421/bq27421.c ****     }
 491:Lib/bq27421/bq27421.c **** 
 492:Lib/bq27421/bq27421.c ****     return true;
 493:Lib/bq27421/bq27421.c **** }
ARM GAS  C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s 			page 33


 1267              		.loc 1 493 0
 1268 000a 08BD     		pop	{r3, pc}
 1269              		.cfi_endproc
 1270              	.LFE136:
 1272              		.section	.text.bq27421_readAvgCurrent_mA,"ax",%progbits
 1273              		.align	1
 1274              		.global	bq27421_readAvgCurrent_mA
 1275              		.syntax unified
 1276              		.thumb
 1277              		.thumb_func
 1278              		.fpu fpv4-sp-d16
 1280              	bq27421_readAvgCurrent_mA:
 1281              	.LFB137:
 494:Lib/bq27421/bq27421.c **** 
 495:Lib/bq27421/bq27421.c **** bool bq27421_readAvgCurrent_mA( int16_t *avgCurrent_mA )
 496:Lib/bq27421/bq27421.c **** {
 1282              		.loc 1 496 0
 1283              		.cfi_startproc
 1284              		@ args = 0, pretend = 0, frame = 0
 1285              		@ frame_needed = 0, uses_anonymous_args = 0
 1286              	.LVL174:
 1287 0000 08B5     		push	{r3, lr}
 1288              	.LCFI33:
 1289              		.cfi_def_cfa_offset 8
 1290              		.cfi_offset 3, -8
 1291              		.cfi_offset 14, -4
 497:Lib/bq27421/bq27421.c ****     if( !bq27421_i2c_command_read( BQ27421_AVG_CURRENT_LOW, (uint16_t *)avgCurrent_mA ) )
 1292              		.loc 1 497 0
 1293 0002 0146     		mov	r1, r0
 1294 0004 1020     		movs	r0, #16
 1295              	.LVL175:
 1296 0006 FFF7FEFF 		bl	bq27421_i2c_command_read
 1297              	.LVL176:
 498:Lib/bq27421/bq27421.c ****     {
 499:Lib/bq27421/bq27421.c ****         return false;
 500:Lib/bq27421/bq27421.c ****     }
 501:Lib/bq27421/bq27421.c **** 
 502:Lib/bq27421/bq27421.c ****     return true;
 503:Lib/bq27421/bq27421.c **** }
 1298              		.loc 1 503 0
 1299 000a 08BD     		pop	{r3, pc}
 1300              		.cfi_endproc
 1301              	.LFE137:
 1303              		.section	.text.bq27421_readStateofCharge_percent,"ax",%progbits
 1304              		.align	1
 1305              		.global	bq27421_readStateofCharge_percent
 1306              		.syntax unified
 1307              		.thumb
 1308              		.thumb_func
 1309              		.fpu fpv4-sp-d16
 1311              	bq27421_readStateofCharge_percent:
 1312              	.LFB138:
 504:Lib/bq27421/bq27421.c **** 
 505:Lib/bq27421/bq27421.c **** bool bq27421_readStateofCharge_percent( uint16_t *soc_percent )
 506:Lib/bq27421/bq27421.c **** {
 1313              		.loc 1 506 0
 1314              		.cfi_startproc
ARM GAS  C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s 			page 34


 1315              		@ args = 0, pretend = 0, frame = 0
 1316              		@ frame_needed = 0, uses_anonymous_args = 0
 1317              	.LVL177:
 1318 0000 08B5     		push	{r3, lr}
 1319              	.LCFI34:
 1320              		.cfi_def_cfa_offset 8
 1321              		.cfi_offset 3, -8
 1322              		.cfi_offset 14, -4
 507:Lib/bq27421/bq27421.c ****     if( !bq27421_i2c_command_read( BQ27421_STATE_OF_CHARGE_LOW, soc_percent ) )
 1323              		.loc 1 507 0
 1324 0002 0146     		mov	r1, r0
 1325 0004 1C20     		movs	r0, #28
 1326              	.LVL178:
 1327 0006 FFF7FEFF 		bl	bq27421_i2c_command_read
 1328              	.LVL179:
 508:Lib/bq27421/bq27421.c ****     {
 509:Lib/bq27421/bq27421.c ****         return false;
 510:Lib/bq27421/bq27421.c ****     }
 511:Lib/bq27421/bq27421.c **** 
 512:Lib/bq27421/bq27421.c ****     return true;
 513:Lib/bq27421/bq27421.c **** }
 1329              		.loc 1 513 0
 1330 000a 08BD     		pop	{r3, pc}
 1331              		.cfi_endproc
 1332              	.LFE138:
 1334              		.section	.text.bq27421_readControlReg,"ax",%progbits
 1335              		.align	1
 1336              		.global	bq27421_readControlReg
 1337              		.syntax unified
 1338              		.thumb
 1339              		.thumb_func
 1340              		.fpu fpv4-sp-d16
 1342              	bq27421_readControlReg:
 1343              	.LFB139:
 514:Lib/bq27421/bq27421.c **** 
 515:Lib/bq27421/bq27421.c **** bool bq27421_readControlReg( uint16_t *control )
 516:Lib/bq27421/bq27421.c **** {
 1344              		.loc 1 516 0
 1345              		.cfi_startproc
 1346              		@ args = 0, pretend = 0, frame = 0
 1347              		@ frame_needed = 0, uses_anonymous_args = 0
 1348              	.LVL180:
 1349 0000 10B5     		push	{r4, lr}
 1350              	.LCFI35:
 1351              		.cfi_def_cfa_offset 8
 1352              		.cfi_offset 4, -8
 1353              		.cfi_offset 14, -4
 1354 0002 0446     		mov	r4, r0
 517:Lib/bq27421/bq27421.c ****     if( !bq27421_i2c_control_write( BQ27421_CONTROL_STATUS ) )
 1355              		.loc 1 517 0
 1356 0004 0020     		movs	r0, #0
 1357              	.LVL181:
 1358 0006 FFF7FEFF 		bl	bq27421_i2c_control_write
 1359              	.LVL182:
 1360 000a 0346     		mov	r3, r0
 1361 000c 08B9     		cbnz	r0, .L103
 1362              	.L101:
ARM GAS  C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s 			page 35


 518:Lib/bq27421/bq27421.c ****     {
 519:Lib/bq27421/bq27421.c ****         return false;
 520:Lib/bq27421/bq27421.c ****     }
 521:Lib/bq27421/bq27421.c ****     if( !bq27421_i2c_command_read( BQ27421_CONTROL_LOW, control ) )
 522:Lib/bq27421/bq27421.c ****     {
 523:Lib/bq27421/bq27421.c ****         return false;
 524:Lib/bq27421/bq27421.c ****     }
 525:Lib/bq27421/bq27421.c **** 
 526:Lib/bq27421/bq27421.c ****     return true;
 527:Lib/bq27421/bq27421.c **** }
 1363              		.loc 1 527 0
 1364 000e 1846     		mov	r0, r3
 1365 0010 10BD     		pop	{r4, pc}
 1366              	.LVL183:
 1367              	.L103:
 521:Lib/bq27421/bq27421.c ****     {
 1368              		.loc 1 521 0
 1369 0012 2146     		mov	r1, r4
 1370 0014 0020     		movs	r0, #0
 1371 0016 FFF7FEFF 		bl	bq27421_i2c_command_read
 1372              	.LVL184:
 1373 001a 0346     		mov	r3, r0
 1374 001c F7E7     		b	.L101
 1375              		.cfi_endproc
 1376              	.LFE139:
 1378              		.section	.text.bq27421_readFlagsReg,"ax",%progbits
 1379              		.align	1
 1380              		.global	bq27421_readFlagsReg
 1381              		.syntax unified
 1382              		.thumb
 1383              		.thumb_func
 1384              		.fpu fpv4-sp-d16
 1386              	bq27421_readFlagsReg:
 1387              	.LFB140:
 528:Lib/bq27421/bq27421.c **** 
 529:Lib/bq27421/bq27421.c **** bool bq27421_readFlagsReg( uint16_t *flags )
 530:Lib/bq27421/bq27421.c **** {
 1388              		.loc 1 530 0
 1389              		.cfi_startproc
 1390              		@ args = 0, pretend = 0, frame = 0
 1391              		@ frame_needed = 0, uses_anonymous_args = 0
 1392              	.LVL185:
 1393 0000 08B5     		push	{r3, lr}
 1394              	.LCFI36:
 1395              		.cfi_def_cfa_offset 8
 1396              		.cfi_offset 3, -8
 1397              		.cfi_offset 14, -4
 531:Lib/bq27421/bq27421.c ****     if( !bq27421_i2c_command_read( BQ27421_FLAGS_LOW, flags ) )
 1398              		.loc 1 531 0
 1399 0002 0146     		mov	r1, r0
 1400 0004 0620     		movs	r0, #6
 1401              	.LVL186:
 1402 0006 FFF7FEFF 		bl	bq27421_i2c_command_read
 1403              	.LVL187:
 532:Lib/bq27421/bq27421.c ****     {
 533:Lib/bq27421/bq27421.c ****         return false;
 534:Lib/bq27421/bq27421.c ****     }
ARM GAS  C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s 			page 36


 535:Lib/bq27421/bq27421.c **** 
 536:Lib/bq27421/bq27421.c ****     return true;
 537:Lib/bq27421/bq27421.c **** }
 1404              		.loc 1 537 0
 1405 000a 08BD     		pop	{r3, pc}
 1406              		.cfi_endproc
 1407              	.LFE140:
 1409              		.section	.text.bq27421_readopConfig,"ax",%progbits
 1410              		.align	1
 1411              		.global	bq27421_readopConfig
 1412              		.syntax unified
 1413              		.thumb
 1414              		.thumb_func
 1415              		.fpu fpv4-sp-d16
 1417              	bq27421_readopConfig:
 1418              	.LFB141:
 538:Lib/bq27421/bq27421.c **** 
 539:Lib/bq27421/bq27421.c **** bool bq27421_readopConfig( uint16_t *opConfig )
 540:Lib/bq27421/bq27421.c **** {
 1419              		.loc 1 540 0
 1420              		.cfi_startproc
 1421              		@ args = 0, pretend = 0, frame = 0
 1422              		@ frame_needed = 0, uses_anonymous_args = 0
 1423              	.LVL188:
 1424 0000 08B5     		push	{r3, lr}
 1425              	.LCFI37:
 1426              		.cfi_def_cfa_offset 8
 1427              		.cfi_offset 3, -8
 1428              		.cfi_offset 14, -4
 541:Lib/bq27421/bq27421.c ****     if( !bq27421_i2c_command_read( BQ27421_OPCONFIG_LOW, opConfig ) )
 1429              		.loc 1 541 0
 1430 0002 0146     		mov	r1, r0
 1431 0004 3A20     		movs	r0, #58
 1432              	.LVL189:
 1433 0006 FFF7FEFF 		bl	bq27421_i2c_command_read
 1434              	.LVL190:
 542:Lib/bq27421/bq27421.c ****     {
 543:Lib/bq27421/bq27421.c ****         return false;
 544:Lib/bq27421/bq27421.c ****     }
 545:Lib/bq27421/bq27421.c **** 
 546:Lib/bq27421/bq27421.c ****     return true;
 547:Lib/bq27421/bq27421.c **** }
 1435              		.loc 1 547 0
 1436 000a 08BD     		pop	{r3, pc}
 1437              		.cfi_endproc
 1438              	.LFE141:
 1440              		.section	.text.bq27421_readRemainingCapacity_mAh,"ax",%progbits
 1441              		.align	1
 1442              		.global	bq27421_readRemainingCapacity_mAh
 1443              		.syntax unified
 1444              		.thumb
 1445              		.thumb_func
 1446              		.fpu fpv4-sp-d16
 1448              	bq27421_readRemainingCapacity_mAh:
 1449              	.LFB142:
 548:Lib/bq27421/bq27421.c **** 
 549:Lib/bq27421/bq27421.c **** bool bq27421_readRemainingCapacity_mAh( uint16_t *capacity_mAh )
ARM GAS  C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s 			page 37


 550:Lib/bq27421/bq27421.c **** {
 1450              		.loc 1 550 0
 1451              		.cfi_startproc
 1452              		@ args = 0, pretend = 0, frame = 0
 1453              		@ frame_needed = 0, uses_anonymous_args = 0
 1454              	.LVL191:
 1455 0000 08B5     		push	{r3, lr}
 1456              	.LCFI38:
 1457              		.cfi_def_cfa_offset 8
 1458              		.cfi_offset 3, -8
 1459              		.cfi_offset 14, -4
 551:Lib/bq27421/bq27421.c ****     if( !bq27421_i2c_command_read( BQ27421_REMAINING_CAP_LOW, capacity_mAh ) )
 1460              		.loc 1 551 0
 1461 0002 0146     		mov	r1, r0
 1462 0004 0C20     		movs	r0, #12
 1463              	.LVL192:
 1464 0006 FFF7FEFF 		bl	bq27421_i2c_command_read
 1465              	.LVL193:
 552:Lib/bq27421/bq27421.c ****     {
 553:Lib/bq27421/bq27421.c ****         return false;
 554:Lib/bq27421/bq27421.c ****     }
 555:Lib/bq27421/bq27421.c **** 
 556:Lib/bq27421/bq27421.c ****     return true;
 557:Lib/bq27421/bq27421.c **** }
 1466              		.loc 1 557 0
 1467 000a 08BD     		pop	{r3, pc}
 1468              		.cfi_endproc
 1469              	.LFE142:
 1471              		.section	.text.bq27421_readFullChargeCapacity_mAh,"ax",%progbits
 1472              		.align	1
 1473              		.global	bq27421_readFullChargeCapacity_mAh
 1474              		.syntax unified
 1475              		.thumb
 1476              		.thumb_func
 1477              		.fpu fpv4-sp-d16
 1479              	bq27421_readFullChargeCapacity_mAh:
 1480              	.LFB143:
 558:Lib/bq27421/bq27421.c **** 
 559:Lib/bq27421/bq27421.c **** bool bq27421_readFullChargeCapacity_mAh( uint16_t *capacity_mAh )
 560:Lib/bq27421/bq27421.c **** {
 1481              		.loc 1 560 0
 1482              		.cfi_startproc
 1483              		@ args = 0, pretend = 0, frame = 0
 1484              		@ frame_needed = 0, uses_anonymous_args = 0
 1485              	.LVL194:
 1486 0000 08B5     		push	{r3, lr}
 1487              	.LCFI39:
 1488              		.cfi_def_cfa_offset 8
 1489              		.cfi_offset 3, -8
 1490              		.cfi_offset 14, -4
 561:Lib/bq27421/bq27421.c ****     if( !bq27421_i2c_command_read( BQ27421_FULL_CHARGE_CAP_LOW, capacity_mAh ) )
 1491              		.loc 1 561 0
 1492 0002 0146     		mov	r1, r0
 1493 0004 0E20     		movs	r0, #14
 1494              	.LVL195:
 1495 0006 FFF7FEFF 		bl	bq27421_i2c_command_read
 1496              	.LVL196:
ARM GAS  C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s 			page 38


 562:Lib/bq27421/bq27421.c ****     {
 563:Lib/bq27421/bq27421.c ****         return false;
 564:Lib/bq27421/bq27421.c ****     }
 565:Lib/bq27421/bq27421.c **** 
 566:Lib/bq27421/bq27421.c ****     return true;
 567:Lib/bq27421/bq27421.c **** }
 1497              		.loc 1 567 0
 1498 000a 08BD     		pop	{r3, pc}
 1499              		.cfi_endproc
 1500              	.LFE143:
 1502              		.section	.text.bq27421_readStateofHealth_percent,"ax",%progbits
 1503              		.align	1
 1504              		.global	bq27421_readStateofHealth_percent
 1505              		.syntax unified
 1506              		.thumb
 1507              		.thumb_func
 1508              		.fpu fpv4-sp-d16
 1510              	bq27421_readStateofHealth_percent:
 1511              	.LFB144:
 568:Lib/bq27421/bq27421.c **** 
 569:Lib/bq27421/bq27421.c **** bool bq27421_readStateofHealth_percent( uint16_t *soh_percent )
 570:Lib/bq27421/bq27421.c **** {
 1512              		.loc 1 570 0
 1513              		.cfi_startproc
 1514              		@ args = 0, pretend = 0, frame = 0
 1515              		@ frame_needed = 0, uses_anonymous_args = 0
 1516              	.LVL197:
 1517 0000 10B5     		push	{r4, lr}
 1518              	.LCFI40:
 1519              		.cfi_def_cfa_offset 8
 1520              		.cfi_offset 4, -8
 1521              		.cfi_offset 14, -4
 1522 0002 0446     		mov	r4, r0
 571:Lib/bq27421/bq27421.c ****     if( !bq27421_i2c_command_read( BQ27421_STATE_OF_HEALTH_LOW, soh_percent ) )
 1523              		.loc 1 571 0
 1524 0004 0146     		mov	r1, r0
 1525 0006 2020     		movs	r0, #32
 1526              	.LVL198:
 1527 0008 FFF7FEFF 		bl	bq27421_i2c_command_read
 1528              	.LVL199:
 1529 000c 0346     		mov	r3, r0
 1530 000e 08B1     		cbz	r0, .L113
 572:Lib/bq27421/bq27421.c ****     {
 573:Lib/bq27421/bq27421.c ****         return false;
 574:Lib/bq27421/bq27421.c ****     }
 575:Lib/bq27421/bq27421.c **** 
 576:Lib/bq27421/bq27421.c ****     *soh_percent = *soh_percent & 0x00FF;
 1531              		.loc 1 576 0
 1532 0010 2278     		ldrb	r2, [r4]	@ zero_extendqisi2
 1533 0012 2280     		strh	r2, [r4]	@ movhi
 1534              	.L113:
 577:Lib/bq27421/bq27421.c **** 
 578:Lib/bq27421/bq27421.c ****     return true;
 579:Lib/bq27421/bq27421.c **** }...
 1535              		.loc 1 579 0
 1536 0014 1846     		mov	r0, r3
 1537 0016 10BD     		pop	{r4, pc}
ARM GAS  C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s 			page 39


 1538              		.cfi_endproc
 1539              	.LFE144:
 1541              		.global	__aeabi_ui2d
 1542              		.global	__aeabi_dsub
 1543              		.section	.text.bq27421_update,"ax",%progbits
 1544              		.align	1
 1545              		.global	bq27421_update
 1546              		.syntax unified
 1547              		.thumb
 1548              		.thumb_func
 1549              		.fpu fpv4-sp-d16
 1551              	bq27421_update:
 1552              	.LFB131:
 379:Lib/bq27421/bq27421.c **** {
 1553              		.loc 1 379 0
 1554              		.cfi_startproc
 1555              		@ args = 0, pretend = 0, frame = 8
 1556              		@ frame_needed = 0, uses_anonymous_args = 0
 1557              	.LVL200:
 1558 0000 10B5     		push	{r4, lr}
 1559              	.LCFI41:
 1560              		.cfi_def_cfa_offset 8
 1561              		.cfi_offset 4, -8
 1562              		.cfi_offset 14, -4
 1563 0002 82B0     		sub	sp, sp, #8
 1564              	.LCFI42:
 1565              		.cfi_def_cfa_offset 16
 1566 0004 0446     		mov	r4, r0
 382:Lib/bq27421/bq27421.c ****     if( !bq27421_readVoltage_mV( &(battery->voltage_mV) ) )
 1567              		.loc 1 382 0
 1568 0006 FFF7FEFF 		bl	bq27421_readVoltage_mV
 1569              	.LVL201:
 1570 000a 0346     		mov	r3, r0
 1571 000c 10B9     		cbnz	r0, .L119
 1572              	.L116:
 435:Lib/bq27421/bq27421.c **** }
 1573              		.loc 1 435 0
 1574 000e 1846     		mov	r0, r3
 1575 0010 02B0     		add	sp, sp, #8
 1576              	.LCFI43:
 1577              		.cfi_remember_state
 1578              		.cfi_def_cfa_offset 8
 1579              		@ sp needed
 1580 0012 10BD     		pop	{r4, pc}
 1581              	.LVL202:
 1582              	.L119:
 1583              	.LCFI44:
 1584              		.cfi_restore_state
 386:Lib/bq27421/bq27421.c ****     if( !bq27421_readAvgCurrent_mA( &(battery->current_mA) ) )
 1585              		.loc 1 386 0
 1586 0014 A01C     		adds	r0, r4, #2
 1587 0016 FFF7FEFF 		bl	bq27421_readAvgCurrent_mA
 1588              	.LVL203:
 1589 001a 0346     		mov	r3, r0
 1590 001c 0028     		cmp	r0, #0
 1591 001e F6D0     		beq	.L116
 390:Lib/bq27421/bq27421.c ****     if( !bq27421_readTemp_degK( &temp ) )
ARM GAS  C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s 			page 40


 1592              		.loc 1 390 0
 1593 0020 0DF10600 		add	r0, sp, #6
 1594 0024 FFF7FEFF 		bl	bq27421_readTemp_degK
 1595              	.LVL204:
 1596 0028 0346     		mov	r3, r0
 1597 002a 0028     		cmp	r0, #0
 1598 002c EFD0     		beq	.L116
 394:Lib/bq27421/bq27421.c ****     battery->temp_degC = ( (double)temp / 10 ) - 273.15;
 1599              		.loc 1 394 0
 1600 002e BDF80600 		ldrh	r0, [sp, #6]
 1601 0032 FFF7FEFF 		bl	__aeabi_ui2d
 1602              	.LVL205:
 1603 0036 0022     		movs	r2, #0
 1604 0038 294B     		ldr	r3, .L121+8
 1605 003a FFF7FEFF 		bl	__aeabi_ddiv
 1606              	.LVL206:
 1607 003e 26A3     		adr	r3, .L121
 1608 0040 D3E90023 		ldrd	r2, [r3]
 1609 0044 FFF7FEFF 		bl	__aeabi_dsub
 1610              	.LVL207:
 1611 0048 C4E90201 		strd	r0, [r4, #8]
 396:Lib/bq27421/bq27421.c ****     if( !bq27421_readStateofCharge_percent( &(battery->soc_percent) ) )
 1612              		.loc 1 396 0
 1613 004c 04F11000 		add	r0, r4, #16
 1614 0050 FFF7FEFF 		bl	bq27421_readStateofCharge_percent
 1615              	.LVL208:
 1616 0054 0346     		mov	r3, r0
 1617 0056 0028     		cmp	r0, #0
 1618 0058 D9D0     		beq	.L116
 400:Lib/bq27421/bq27421.c ****     if( !bq27421_readStateofHealth_percent( &(battery->soh_percent) ) )
 1619              		.loc 1 400 0
 1620 005a 04F11200 		add	r0, r4, #18
 1621 005e FFF7FEFF 		bl	bq27421_readStateofHealth_percent
 1622              	.LVL209:
 1623 0062 0346     		mov	r3, r0
 1624 0064 0028     		cmp	r0, #0
 1625 0066 D2D0     		beq	.L116
 404:Lib/bq27421/bq27421.c ****     if( !bq27421_readDesignCapacity_mAh( &(battery->designCapacity_mAh) ) )
 1626              		.loc 1 404 0
 1627 0068 04F11400 		add	r0, r4, #20
 1628 006c FFF7FEFF 		bl	bq27421_readDesignCapacity_mAh
 1629              	.LVL210:
 1630 0070 0346     		mov	r3, r0
 1631 0072 0028     		cmp	r0, #0
 1632 0074 CBD0     		beq	.L116
 408:Lib/bq27421/bq27421.c ****     if( !bq27421_readRemainingCapacity_mAh( &(battery->remainingCapacity_mAh) ) )
 1633              		.loc 1 408 0
 1634 0076 04F11600 		add	r0, r4, #22
 1635 007a FFF7FEFF 		bl	bq27421_readRemainingCapacity_mAh
 1636              	.LVL211:
 1637 007e 0346     		mov	r3, r0
 1638 0080 0028     		cmp	r0, #0
 1639 0082 C4D0     		beq	.L116
 412:Lib/bq27421/bq27421.c ****     if( !bq27421_readFullChargeCapacity_mAh( &(battery->fullChargeCapacity_mAh) ) )
 1640              		.loc 1 412 0
 1641 0084 04F11800 		add	r0, r4, #24
 1642 0088 FFF7FEFF 		bl	bq27421_readFullChargeCapacity_mAh
ARM GAS  C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s 			page 41


 1643              	.LVL212:
 1644 008c 0346     		mov	r3, r0
 1645 008e 0028     		cmp	r0, #0
 1646 0090 BDD0     		beq	.L116
 416:Lib/bq27421/bq27421.c ****     if( !bq27421_readFlagsReg( &temp ) )
 1647              		.loc 1 416 0
 1648 0092 0DF10600 		add	r0, sp, #6
 1649 0096 FFF7FEFF 		bl	bq27421_readFlagsReg
 1650              	.LVL213:
 1651 009a 0346     		mov	r3, r0
 1652 009c 0028     		cmp	r0, #0
 1653 009e B6D0     		beq	.L116
 420:Lib/bq27421/bq27421.c ****     battery->isCritical = temp & 0x0002;
 1654              		.loc 1 420 0
 1655 00a0 BDF80620 		ldrh	r2, [sp, #6]
 1656 00a4 C2F34001 		ubfx	r1, r2, #1, #1
 1657 00a8 A176     		strb	r1, [r4, #26]
 421:Lib/bq27421/bq27421.c ****     battery->isLow = temp & 0x0004;
 1658              		.loc 1 421 0
 1659 00aa C2F38001 		ubfx	r1, r2, #2, #1
 1660 00ae E176     		strb	r1, [r4, #27]
 422:Lib/bq27421/bq27421.c ****     battery->isFull = temp & 0x0200;
 1661              		.loc 1 422 0
 1662 00b0 C2F34022 		ubfx	r2, r2, #9, #1
 1663 00b4 2277     		strb	r2, [r4, #28]
 423:Lib/bq27421/bq27421.c ****     if( battery->current_mA <= 0 )
 1664              		.loc 1 423 0
 1665 00b6 B4F90220 		ldrsh	r2, [r4, #2]
 1666 00ba 002A     		cmp	r2, #0
 1667 00bc 04DD     		ble	.L120
 430:Lib/bq27421/bq27421.c ****         battery->isDischarging = 0;
 1668              		.loc 1 430 0
 1669 00be 0022     		movs	r2, #0
 1670 00c0 A277     		strb	r2, [r4, #30]
 431:Lib/bq27421/bq27421.c ****         battery->isCharging = 1;
 1671              		.loc 1 431 0
 1672 00c2 0122     		movs	r2, #1
 1673 00c4 6277     		strb	r2, [r4, #29]
 1674 00c6 A2E7     		b	.L116
 1675              	.L120:
 425:Lib/bq27421/bq27421.c ****         battery->isDischarging = 1;
 1676              		.loc 1 425 0
 1677 00c8 0122     		movs	r2, #1
 1678 00ca A277     		strb	r2, [r4, #30]
 426:Lib/bq27421/bq27421.c ****         battery->isCharging = 0;
 1679              		.loc 1 426 0
 1680 00cc 0022     		movs	r2, #0
 1681 00ce 6277     		strb	r2, [r4, #29]
 1682 00d0 9DE7     		b	.L116
 1683              	.L122:
 1684 00d2 00BFAFF3 		.align	3
 1684      0080
 1685              	.L121:
 1686 00d8 66666666 		.word	1717986918
 1687 00dc 66127140 		.word	1081152102
 1688 00e0 00002440 		.word	1076101120
 1689              		.cfi_endproc
ARM GAS  C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s 			page 42


 1690              	.LFE131:
 1692              		.text
 1693              	.Letext0:
 1694              		.file 2 "c:\\program files (x86)\\gnu tools arm embedded\\6 2017-q2-update\\arm-none-eabi\\include
 1695              		.file 3 "c:\\program files (x86)\\gnu tools arm embedded\\6 2017-q2-update\\arm-none-eabi\\include
 1696              		.file 4 "Drivers/CMSIS/Include/core_cm4.h"
 1697              		.file 5 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/system_stm32f4xx.h"
 1698              		.file 6 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f407xx.h"
 1699              		.file 7 "c:\\program files (x86)\\gnu tools arm embedded\\6 2017-q2-update\\arm-none-eabi\\include
 1700              		.file 8 "c:\\program files (x86)\\gnu tools arm embedded\\6 2017-q2-update\\arm-none-eabi\\include
 1701              		.file 9 "c:\\program files (x86)\\gnu tools arm embedded\\6 2017-q2-update\\lib\\gcc\\arm-none-eab
 1702              		.file 10 "c:\\program files (x86)\\gnu tools arm embedded\\6 2017-q2-update\\arm-none-eabi\\includ
 1703              		.file 11 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 1704              		.file 12 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 1705              		.file 13 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_i2c.h"
 1706              		.file 14 "Lib/bq27421/bq27421.h"
 1707              		.file 15 "Inc/i2c.h"
 1708              		.file 16 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal.h"
ARM GAS  C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s 			page 43


DEFINED SYMBOLS
                            *ABS*:00000000 bq27421.c
C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s:18     .text.bq27421_i2c_command_write:00000000 $t
C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s:25     .text.bq27421_i2c_command_write:00000000 bq27421_i2c_command_write
C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s:86     .text.bq27421_i2c_command_write:00000038 $d
C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s:91     .text.bq27421_i2c_command_read:00000000 $t
C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s:98     .text.bq27421_i2c_command_read:00000000 bq27421_i2c_command_read
C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s:181    .text.bq27421_i2c_command_read:00000058 $d
C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s:186    .text.bq27421_i2c_control_write:00000000 $t
C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s:193    .text.bq27421_i2c_control_write:00000000 bq27421_i2c_control_write
C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s:280    .text.bq27421_i2c_control_write:0000005c $d
C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s:285    .text.bq27421_i2c_control_read:00000000 $t
C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s:292    .text.bq27421_i2c_control_read:00000000 bq27421_i2c_control_read
C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s:409    .text.bq27421_i2c_control_read:00000088 $d
C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s:414    .text.bq27421_i2c_write_data_block:00000000 $t
C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s:421    .text.bq27421_i2c_write_data_block:00000000 bq27421_i2c_write_data_block
C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s:501    .text.bq27421_i2c_write_data_block:00000048 $d
C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s:506    .text.bq27421_i2c_read_data_block:00000000 $t
C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s:513    .text.bq27421_i2c_read_data_block:00000000 bq27421_i2c_read_data_block
C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s:596    .text.bq27421_i2c_read_data_block:0000004c $d
C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s:605    .text.bq27421_init:00000000 $t
C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s:612    .text.bq27421_init:00000000 bq27421_init
C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s:1084   .text.bq27421_init:00000280 $d
C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s:1092   .text.bq27421_readDeviceType:00000000 $t
C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s:1099   .text.bq27421_readDeviceType:00000000 bq27421_readDeviceType
C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s:1136   .text.bq27421_readDeviceFWver:00000000 $t
C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s:1143   .text.bq27421_readDeviceFWver:00000000 bq27421_readDeviceFWver
C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s:1180   .text.bq27421_readDesignCapacity_mAh:00000000 $t
C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s:1187   .text.bq27421_readDesignCapacity_mAh:00000000 bq27421_readDesignCapacity_mAh
C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s:1211   .text.bq27421_readVoltage_mV:00000000 $t
C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s:1218   .text.bq27421_readVoltage_mV:00000000 bq27421_readVoltage_mV
C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s:1242   .text.bq27421_readTemp_degK:00000000 $t
C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s:1249   .text.bq27421_readTemp_degK:00000000 bq27421_readTemp_degK
C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s:1273   .text.bq27421_readAvgCurrent_mA:00000000 $t
C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s:1280   .text.bq27421_readAvgCurrent_mA:00000000 bq27421_readAvgCurrent_mA
C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s:1304   .text.bq27421_readStateofCharge_percent:00000000 $t
C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s:1311   .text.bq27421_readStateofCharge_percent:00000000 bq27421_readStateofCharge_percent
C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s:1335   .text.bq27421_readControlReg:00000000 $t
C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s:1342   .text.bq27421_readControlReg:00000000 bq27421_readControlReg
C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s:1379   .text.bq27421_readFlagsReg:00000000 $t
C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s:1386   .text.bq27421_readFlagsReg:00000000 bq27421_readFlagsReg
C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s:1410   .text.bq27421_readopConfig:00000000 $t
C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s:1417   .text.bq27421_readopConfig:00000000 bq27421_readopConfig
C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s:1441   .text.bq27421_readRemainingCapacity_mAh:00000000 $t
C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s:1448   .text.bq27421_readRemainingCapacity_mAh:00000000 bq27421_readRemainingCapacity_mAh
C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s:1472   .text.bq27421_readFullChargeCapacity_mAh:00000000 $t
C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s:1479   .text.bq27421_readFullChargeCapacity_mAh:00000000 bq27421_readFullChargeCapacity_mAh
C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s:1503   .text.bq27421_readStateofHealth_percent:00000000 $t
C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s:1510   .text.bq27421_readStateofHealth_percent:00000000 bq27421_readStateofHealth_percent
C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s:1544   .text.bq27421_update:00000000 $t
C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s:1551   .text.bq27421_update:00000000 bq27421_update
C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s:1686   .text.bq27421_update:000000d8 $d
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
HAL_I2C_Master_Transmit
HAL_Delay
ARM GAS  C:\Users\svcgu\AppData\Local\Temp\ccPSXAb5.s 			page 44


hi2c2
HAL_I2C_Master_Receive
__aeabi_i2d
__aeabi_dmul
__aeabi_d2uiz
__aeabi_ddiv
__aeabi_ui2d
__aeabi_dsub
